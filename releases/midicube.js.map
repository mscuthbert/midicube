{"version":3,"file":"midicube.js","mappings":"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AC7DC,EAAgBpB,EAAK,EACrBvE,EAAOuF,EAAWP,QAAQT,EAAK,IAAK,IACpCqB,EAASb,EAAK/E,GACd6F,EAAad,EAAKpL,GAClBmM,EAAO,CACTvB,GAAIqB,EACJ5F,OACA+F,QAASJ,EACTK,SAAUrM,GAEdsL,EAAIE,KAAKQ,GAAiBG,EAC1Bb,EAAIC,OAAOU,GAAUE,EACrBb,EAAIG,WAAWS,GAAcZ,EAAIG,WAAWS,IAAe,GAC3DZ,EAAIG,WAAWS,GAAY3G,KAAK4G,EACpC,CAEJ,OAAOb,CAAG,EAGIgB,CAAS,CACvB,MAAS,CACL,yBACA,0BACA,yBACA,qBACA,qBACA,qBACA,gBACA,cAEJ,uBAAwB,CACpB,YACA,kBACA,eACA,gBACA,aACA,eACA,mBACA,eAEJ,MAAS,CACL,mBACA,sBACA,gBACA,kBACA,gBACA,eACA,eACA,sBAEJ,OAAU,CACN,6BACA,6BACA,4BACA,6BACA,6BACA,uBACA,uBACA,uBAEJ,KAAQ,CACJ,mBACA,4BACA,0BACA,mBACA,iBACA,iBACA,kBACA,mBAEJ,QAAW,CACP,YACA,WACA,WACA,gBACA,qBACA,uBACA,qBACA,cAEJ,SAAY,CACR,uBACA,uBACA,qBACA,qBACA,gBACA,gBACA,iBACA,oBAEJ,MAAS,CACL,aACA,cACA,UACA,mBACA,iBACA,mBACA,mBACA,oBAEJ,KAAQ,CACJ,iBACA,cACA,eACA,kBACA,UACA,kBACA,aACA,eAEJ,KAAQ,CACJ,aACA,WACA,cACA,eACA,kBACA,gBACA,aACA,cAEJ,aAAc,CACV,qBACA,uBACA,uBACA,oBACA,sBACA,oBACA,qBACA,2BAEJ,YAAa,CACT,qBACA,kBACA,uBACA,mBACA,mBACA,sBACA,kBACA,oBAEJ,gBAAiB,CACb,iBACA,uBACA,oBACA,wBACA,wBACA,qBACA,oBACA,qBAEJ,OAAU,CACN,YACA,YACA,eACA,WACA,cACA,cACA,aACA,cAEJ,WAAc,CACV,kBACA,YACA,kBACA,gBACA,iBACA,kBACA,kBAEJ,gBAAiB,CACb,qBACA,wBACA,mBACA,eACA,iBACA,qB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","sources":["webpack://MIDI/webpack/universalModuleDefinition","webpack://MIDI/./node_modules/regenerator-runtime/runtime.js","webpack://MIDI/webpack/bootstrap","webpack://MIDI/webpack/runtime/define property getters","webpack://MIDI/webpack/runtime/hasOwnProperty shorthand","webpack://MIDI/webpack/runtime/make namespace object","webpack://MIDI/./js/safariDetect.js","webpack://MIDI/./js/audioDetect.js","webpack://MIDI/./js/debug.js","webpack://MIDI/./js/gm.js","webpack://MIDI/./js/plugin.audiotag.js","webpack://MIDI/./js/shim/Base64binary.js","webpack://MIDI/./js/plugin.webaudio.js","webpack://MIDI/./js/plugin.webmidi.js","webpack://MIDI/./inc/jasmid/stream.js","webpack://MIDI/./inc/jasmid/midifile.js","webpack://MIDI/./inc/jasmid/replayer.js","webpack://MIDI/./js/player.js","webpack://MIDI/./inc/colorspace.js","webpack://MIDI/./js/synesthesia.js","webpack://MIDI/./js/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MIDI\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MIDI\"] = factory();\n\telse\n\t\troot[\"MIDI\"] = factory();\n})(self, () => {\nreturn ","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method;\n    var method = delegate.iterator[methodName];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method, or a missing .next mehtod, always terminate the\n      // yield* loop.\n      context.delegate = null;\n\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n      if (methodName !== \"return\") {\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a '\" + methodName + \"' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Safari as of 18.5 is claiming to be able to be able to play ogg files but\n * still cannot.  It also applies to Webkit browsers that are skinned differently\n * like Chrome on iPad.  This seems to be the best detection I know of for now.\n *\n * When OGG support is confirmed from elsewhere, will remove this file.\n */\nexport const IS_SAFARI_DESKTOP = typeof window.safari !== 'undefined';\nexport const IS_FIREFOX = window.navigator.userAgent.toLowerCase().includes('firefox');\nexport const SUPPORTS_SHADOW_SELECTION = typeof window.ShadowRoot.prototype.getSelection === 'function';\nexport const SUPPORTS_BEFORE_INPUT = typeof window.InputEvent.prototype.getTargetRanges === 'function';\nexport const IS_SAFARI = (\n    !SUPPORTS_SHADOW_SELECTION && SUPPORTS_BEFORE_INPUT && !IS_FIREFOX\n) || IS_SAFARI_DESKTOP;\n","/*\n    ----------------------------------------------------------\n    MIDI.audioDetect: 2025-05-23\n    ----------------------------------------------------------\n    https://github.com/mscuthbert/midicube\n    ----------------------------------------------------------\n    Probably, Maybe, No... Absolutely!\n    Test to see what types of <audio> MIME types are playable by the browser.\n    ----------------------------------------------------------\n*/\n\nimport { IS_SAFARI } from './safariDetect';\n\nexport const supports = {}; // object of supported file types\n\nlet pending = 0; // pending file types to process\n\nexport const canPlayThrough = src => { // check whether format plays through\n    pending += 1;\n    const body = document.body;\n    const audio = new Audio();\n    const mime = src.split(';')[0];\n    audio.id = 'audio';\n    audio.setAttribute('preload', 'auto');\n    audio.setAttribute('audiobuffer', 'true');\n    audio.addEventListener('error', () => {\n        body.removeChild(audio);\n        supports[mime] = false;\n        pending -= 1;\n    }, false);\n\n    // fires when enough data has loaded that <audio> tag\n    // can successfully play to end without stopping.\n    audio.addEventListener('canplaythrough', () => {\n        body.removeChild(audio);\n        supports[mime] = true;\n        pending -= 1;\n    }, false);\n    audio.src = 'data:' + src;\n    body.appendChild(audio);\n};\n\nexport function audioDetect(successCallback) {\n    // detect jazz-midi plugin\n    if (typeof navigator !== 'undefined' && navigator.requestMIDIAccess) {\n        const isNative = Function.prototype.toString\n            .call(navigator.requestMIDIAccess)\n            .indexOf('[native code]');\n\n        if (isNative) { // has native webmidi support\n            supports.webmidi = true;\n        } else if (typeof navigator !== 'undefined' && navigator.plugins !== undefined) {\n            // check for jazz plugin webmidi support\n            for (const plugin of Array.from(navigator.plugins)) {\n                if (plugin.name.indexOf('Jazz-Plugin') >= 0) {\n                    supports.webmidi = true;\n                }\n            }\n        }\n    }\n\n    // check whether <audio> tag is supported\n    if (typeof Audio === 'undefined') {\n        return successCallback({});\n    } else {\n        supports.audiotag = true;\n    }\n\n    // check for webaudio api support\n    // noinspection JSUnresolvedVariable\n    const ctx_constructor = window.AudioContext || window.webkitAudioContext;\n    if (ctx_constructor && !!ctx_constructor.prototype.createGain) {\n        supports.webaudio = true;\n    }\n\n    // check whether canPlayType is supported\n    const audio = new Audio();\n    if (typeof (audio.canPlayType) === 'undefined') {\n        return successCallback(supports);\n    }\n\n    // see what we can learn from the browser\n    const vorbis_play_type = audio.canPlayType('audio/ogg; codecs=\"vorbis\"');\n    const vorbis = (vorbis_play_type === 'probably' || vorbis_play_type === 'maybe');\n    const mpeg_play_type = audio.canPlayType('audio/mpeg');\n    const mpeg = (mpeg_play_type === 'probably' || mpeg_play_type === 'maybe');\n\n    // if one play_type is probably and the other is maybe, always go with\n    // the probably despite what canPlayThrough reveals.\n    // this is for Edge and other browsers where canPlayThrough for ogg\n    // is successful but nothing plays.\n    if (vorbis_play_type === 'probably') {\n        supports.ogg_mp3_precedence = 'ogg';\n    } else if (mpeg_play_type === 'probably') {\n        supports.ogg_mp3_precedence = 'mp3';\n    } else {  // it is not clear that either can play; so might as well try ogg.\n        supports.ogg_mp3_precedence = 'ogg';\n    }\n    if (IS_SAFARI) {\n        // Safari is not reporting proper playback ability.\n        supports.ogg_mp3_precedence = 'mp3';\n    }\n\n    // maybe nothing is supported\n    if (!vorbis && !mpeg) {\n        return successCallback(supports);\n    }\n\n    // or maybe something is supported\n    /* eslint-disable max-len */\n    if (vorbis) {\n        // noinspection SpellCheckingInspection\n        canPlayThrough('audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA=');\n    }\n    if (mpeg) {\n        // noinspection SpellCheckingInspection\n        canPlayThrough('audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq');\n    }\n    /* eslint-enable max-len */\n\n    // let's find out if it is supported!\n    const time = (new Date()).getTime();\n    const interval = window.setInterval(() => {\n        const now = (new Date()).getTime();\n        const maxExecution = now - time > 5000;\n        if (!pending || maxExecution) {\n            window.clearInterval(interval);\n            successCallback(supports);\n        }\n    }, 1);\n    return undefined;\n}\n","export const DEBUG = false;\n","/*\n----------------------------------------------------------\nGeneralMIDI\n----------------------------------------------------------\n*/\n\nconst GM_fixer = in_dict => {\n    const asId = name => name.replace(/[^a-z0-9 ]/gi, '').replace(/ /g, '_').toLowerCase();\n    const res = {\n        byName: { },\n        byId: { },\n        byCategory: { },\n    };\n    for (const [key, list] of Object.entries(in_dict)) {\n        for (const instrument of list) {\n            if (!instrument) {\n                continue;\n            }\n            const id = parseInt(instrument.substr(0, instrument.indexOf(' ')), 10);\n            const programNumber = id - 1;\n            const name = instrument.replace(id + ' ', '');\n            const nameId = asId(name);\n            const categoryId = asId(key);\n            const spec = {\n                id: nameId,\n                name,\n                program: programNumber,\n                category: key,\n            };\n            res.byId[programNumber] = spec;\n            res.byName[nameId] = spec;\n            res.byCategory[categoryId] = res.byCategory[categoryId] || [];\n            res.byCategory[categoryId].push(spec);\n        }\n    }\n    return res;\n};\n\nexport const GM = GM_fixer({\n    'Piano': [\n        '1 Acoustic Grand Piano',\n        '2 Bright Acoustic Piano',\n        '3 Electric Grand Piano',\n        '4 Honky-tonk Piano',\n        '5 Electric Piano 1',\n        '6 Electric Piano 2',\n        '7 Harpsichord',\n        '8 Clavinet',\n    ],\n    'Chromatic Percussion': [\n        '9 Celesta',\n        '10 Glockenspiel',\n        '11 Music Box',\n        '12 Vibraphone',\n        '13 Marimba',\n        '14 Xylophone',\n        '15 Tubular Bells',\n        '16 Dulcimer',\n    ],\n    'Organ': [\n        '17 Drawbar Organ',\n        '18 Percussive Organ',\n        '19 Rock Organ',\n        '20 Church Organ',\n        '21 Reed Organ',\n        '22 Accordion',\n        '23 Harmonica',\n        '24 Tango Accordion',\n    ],\n    'Guitar': [\n        '25 Acoustic Guitar (nylon)',\n        '26 Acoustic Guitar (steel)',\n        '27 Electric Guitar (jazz)',\n        '28 Electric Guitar (clean)',\n        '29 Electric Guitar (muted)',\n        '30 Overdriven Guitar',\n        '31 Distortion Guitar',\n        '32 Guitar Harmonics',\n    ],\n    'Bass': [\n        '33 Acoustic Bass',\n        '34 Electric Bass (finger)',\n        '35 Electric Bass (pick)',\n        '36 Fretless Bass',\n        '37 Slap Bass 1',\n        '38 Slap Bass 2',\n        '39 Synth Bass 1',\n        '40 Synth Bass 2',\n    ],\n    'Strings': [\n        '41 Violin',\n        '42 Viola',\n        '43 Cello',\n        '44 Contrabass',\n        '45 Tremolo Strings',\n        '46 Pizzicato Strings',\n        '47 Orchestral Harp',\n        '48 Timpani', // ??\n    ],\n    'Ensemble': [\n        '49 String Ensemble 1',\n        '50 String Ensemble 2',\n        '51 Synth Strings 1',\n        '52 Synth Strings 2',\n        '53 Choir Aahs',\n        '54 Voice Oohs',\n        '55 Synth Choir',\n        '56 Orchestra Hit',\n    ],\n    'Brass': [\n        '57 Trumpet',\n        '58 Trombone',\n        '59 Tuba',\n        '60 Muted Trumpet',\n        '61 French Horn',\n        '62 Brass Section',\n        '63 Synth Brass 1',\n        '64 Synth Brass 2',\n    ],\n    'Reed': [\n        '65 Soprano Sax',\n        '66 Alto Sax',\n        '67 Tenor Sax',\n        '68 Baritone Sax',\n        '69 Oboe',\n        '70 English Horn',\n        '71 Bassoon',\n        '72 Clarinet',\n    ],\n    'Pipe': [\n        '73 Piccolo',\n        '74 Flute',\n        '75 Recorder',\n        '76 Pan Flute',\n        '77 Blown Bottle',\n        '78 Shakuhachi',\n        '79 Whistle',\n        '80 Ocarina',\n    ],\n    'Synth Lead': [\n        '81 Lead 1 (square)',\n        '82 Lead 2 (sawtooth)',\n        '83 Lead 3 (calliope)',\n        '84 Lead 4 (chiff)',\n        '85 Lead 5 (charang)',\n        '86 Lead 6 (voice)',\n        '87 Lead 7 (fifths)',\n        '88 Lead 8 (bass + lead)',\n    ],\n    'Synth Pad': [\n        '89 Pad 1 (new age)',\n        '90 Pad 2 (warm)',\n        '91 Pad 3 (polysynth)',\n        '92 Pad 4 (choir)',\n        '93 Pad 5 (bowed)',\n        '94 Pad 6 (metallic)',\n        '95 Pad 7 (halo)',\n        '96 Pad 8 (sweep)',\n    ],\n    'Synth Effects': [\n        '97 FX 1 (rain)',\n        '98 FX 2 (soundtrack)',\n        '99 FX 3 (crystal)',\n        '100 FX 4 (atmosphere)',\n        '101 FX 5 (brightness)',\n        '102 FX 6 (goblins)',\n        '103 FX 7 (echoes)',\n        '104 FX 8 (sci-fi)',\n    ],\n    'Ethnic': [\n        '105 Sitar',\n        '106 Banjo',\n        '107 Shamisen',\n        '108 Koto',\n        '109 Kalimba',\n        '110 Bagpipe',\n        '111 Fiddle',\n        '112 Shanai',\n    ],\n    'Percussive': [\n        '113 Tinkle Bell',\n        '114 Agogo',\n        '115 Steel Drums',\n        '116 Woodblock',\n        '117 Taiko Drum',\n        '118 Melodic Tom',\n        '119 Synth Drum',\n    ],\n    'Sound effects': [\n        '120 Reverse Cymbal',\n        '121 Guitar Fret Noise',\n        '122 Breath Noise',\n        '123 Seashore',\n        '124 Bird Tweet',\n        '125 Telephone Ring',\n        '126 Helicopter',\n        '127 Applause',\n        '128 Gunshot',\n    ],\n});\n\n/* channels\n--------------------------------------------------- */\nconst get_channels = () => { // 0 - 15 channels\n    const channels = {};\n    for (let i = 0; i < 16; i++) {\n        channels[i] = { // default values\n            program: i,\n            pitchBend: 0,\n            mute: false,\n            mono: false,\n            omni: false,\n            solo: false,\n        };\n    }\n    return channels;\n};\n\nexport const channels = get_channels();\n\n\n\n/* get/setInstrument\n--------------------------------------------------- */\nexport const getProgram = (channelId) => {\n    const channel = channels[channelId];\n    return channel && channel.program;\n};\n\nexport const setProgram = (channelId, program, delay) => {\n    const channel = channels[channelId];\n    if (delay) {\n        return setTimeout(() => {\n            channel.program = program;\n        }, delay);\n    } else {\n        channel.program = program;\n    }\n    return undefined;\n};\n\n/* get/setMono\n--------------------------------------------------- */\nexport const getMono = (channelId) => {\n    const channel = channels[channelId];\n    return channel && channel.mono;\n};\n\nexport const setMono = (channelId, truthy, delay) => {\n    const channel = channels[channelId];\n    if (delay) {\n        return setTimeout(() => {\n            channel.mono = truthy;\n        }, delay);\n    } else {\n        channel.mono = truthy;\n    }\n    return undefined;\n};\n\n/* get/setOmni\n--------------------------------------------------- */\nexport const getOmni = (channelId) => {\n    const channel = channels[channelId];\n    return channel && channel.omni;\n};\n\nexport const setOmni = (channelId, truthy, delay) => {\n    const channel = channels[channelId];\n    if (delay) {\n        return setTimeout(() => {\n            channel.omni = truthy;\n        }, delay);\n    } else {\n        channel.omni = truthy;\n    }\n    return undefined;\n};\n\n/* get/setSolo\n--------------------------------------------------- */\nexport const getSolo = channelId => {\n    const channel = channels[channelId];\n    return channel && channel.solo;\n};\n\nexport const setSolo = (channelId, truthy, delay) => {\n    const channel = channels[channelId];\n    if (delay) {\n        return setTimeout(() => {\n            channel.solo = truthy;\n        }, delay);\n    } else {\n        channel.solo = truthy;\n    }\n    return undefined;\n};\n\n\n/* note conversions\n--------------------------------------------------- */\nexport const keyToNote = {}; // C8  == 108\nexport const noteToKey = {}; // 108 ==  C8\n\n(function helper_set_mapping() {\n    const A0 = 0x15; // first note\n    const C8 = 0x6C; // last note\n    const number2key = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\n    for (let n = A0; n <= C8; n++) {\n        const octave = Math.floor((n - 12) / 12);\n        const name = number2key[n % 12] + octave;\n        keyToNote[name] = n;\n        noteToKey[n] = name;\n    }\n}());\n","/*\n    ----------------------------------------------------------------------\n    AudioTag <audio> - OGG or MPEG Soundbank\n    ----------------------------------------------------------------------\n    http://dev.w3.org/html5/spec/Overview.html#the-audio-element\n    ----------------------------------------------------------------------\n*/\nimport { DEBUG } from './debug.js';\nimport {\n    channels, GM, keyToNote, noteToKey,\n} from './gm.js';\n\nexport const api = 'audiotag';\n\n// information to share with loader...\nexport const shared_root_info = {};\n\nconst volumes = []; // floating point\nfor (let vid = 0; vid < 16; vid++) {\n    volumes[vid] = 127;\n}\n\n\nlet buffer_nid = -1; // current channel\nconst notesOn = []; // instrumentId + noteId that is currently playing in each 'channel', for routing noteOff/chordOff calls\nconst notes = {}; // the piano keys\n\nconst audioBuffers = []; // the audio channels\nfor (let nid = 0; nid < 12; nid++) {\n    audioBuffers[nid] = new Audio();\n}\n// TODO(msc): MIDI.audioBuffers = audioBuffers;\n\nexport const connect = opts => {\n    for (const key of Object.keys(keyToNote)) {\n        notes[key] = {id: key};\n    }\n\n    if (opts.onsuccess) {\n        opts.onsuccess();\n    }\n};\n\n\n// plugin-common methods\n\n// not applicable methods:\nexport const send = (data, delay) => { };\nexport const setController = (channel, type, value, delay) => { };\nexport const pitchBend = (channel, program, delay) => { };\nexport const setEffects = () => {};\nexport const getContext = () => {};\nexport const setContext = () => {};\n\n\nexport const playChannel = (channel, in_note) => {\n    if (!channels[channel]) {\n        return;\n    }\n    const instrument = channels[channel].program;\n    const instrumentId = GM.byId[instrument].id;\n    const note = notes[in_note];\n    if (note) {\n        const instrumentNoteId = instrumentId + '' + note.id;\n        const nid = (buffer_nid + 1) % audioBuffers.length;\n        const audio = audioBuffers[nid];\n        notesOn[nid] = instrumentNoteId;\n        if (!shared_root_info.Soundfont[instrumentId]) {\n            if (DEBUG) {\n                console.log('404', instrumentId);\n            }\n            return;\n        }\n        audio.src = shared_root_info.Soundfont[instrumentId][note.id];\n        audio.volume = volumes[channel] / 127;\n        audio.play();\n        buffer_nid = nid;\n    }\n};\n\nexport const stopChannel = (channel, in_note) => {\n    if (!channels[channel]) {\n        return;\n    }\n    const instrument = channels[channel].program;\n    const instrumentId = GM.byId[instrument].id;\n    const note = notes[in_note];\n    if (note) {\n        const instrumentNoteId = instrumentId + '' + note.id;\n        for (let i = 0, len = audioBuffers.length; i < len; i++) {\n            const nid = (i + buffer_nid + 1) % len;\n            const cId = notesOn[nid];\n            if (cId && cId === instrumentNoteId) {\n                audioBuffers[nid].pause();\n                notesOn[nid] = null;\n                return;\n            }\n        }\n    }\n};\n\n\nexport const setVolume = (channel, n) => {\n    volumes[channel] = n;\n};\n\nexport const programChange = (channel, program) => {\n    channels[channel].instrument = program;\n};\n\nexport const noteOn = (channel, note, velocity, delay) => {\n    const id = noteToKey[note];\n    if (!notes[id]) {\n        return false;\n    }\n    if (delay) {\n        return setTimeout(() => {\n            volumes[channel] = velocity;\n            playChannel(channel, id);\n        }, delay * 1000);\n    } else {\n        volumes[channel] = velocity;\n        playChannel(channel, id);\n        return true;\n    }\n};\n\nexport const noteOff = (channel, note, delay) => {\n    // MASC: Already commented out in MudCube version...\n    //      I see why!  clips all the notes!\n\n    // const id = noteToKey[note];\n    // if (!notes[id]) {\n    //      return;\n    // }\n    // if (delay) {\n    //      return setTimeout(function() {\n    //           stopChannel(channel, id);\n    //      }, delay * 1000)\n    // } else {\n    //      stopChannel(channel, id);\n    // }\n};\n\nexport const chordOn = (channel, chord, velocity, delay) => {\n    for (let idx = 0; idx < chord.length; idx++) {\n        const n = chord[idx];\n        const id = noteToKey[n];\n        if (!notes[id]) {\n            continue;\n        }\n        if (delay) {\n            setTimeout(() => {\n                playChannel(channel, id);\n            }, delay * 1000);\n        } else {\n            playChannel(channel, id);\n        }\n    }\n};\n\nexport const chordOff = (channel, chord, delay) => {\n    for (let idx = 0; idx < chord.length; idx++) {\n        const n = chord[idx];\n        const id = noteToKey[n];\n        if (!notes[id]) {\n            continue;\n        }\n        if (delay) {\n            setTimeout(() => {\n                stopChannel(channel, id);\n            }, delay * 1000);\n        } else {\n            stopChannel(channel, id);\n        }\n    }\n};\n\nexport const stopAllNotes = () => {\n    for (let nid = 0, {length} = audioBuffers; nid < length; nid++) {\n        audioBuffers[nid].pause();\n    }\n};\n\n","/**\n * @license -------------------------------------------------------------------\n *   module: Base64Binary\n *      src: http://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/\n *  license: Simplified BSD License\n * -------------------------------------------------------------------\n * Copyright 2011, Daniel Guerrero. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     - Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     - Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL DANIEL GUERRERO BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// noinspection SpellCheckingInspection\n/**\n * Modified by MSC to be a module.\n * @type {string}\n * @private\n */\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/* will return a  Uint8Array type */\nexport function decodeArrayBuffer(input) {\n    const bytes = Math.ceil((3 * input.length) / 4.0);\n    const ab = new ArrayBuffer(bytes);\n    decode(input, ab);\n\n    return ab;\n}\n\nexport function decode(input, arrayBuffer) {\n    //get last chars to see if are valid\n    const lkey1 = _keyStr.indexOf(input.charAt(input.length - 1));\n    const lkey2 = _keyStr.indexOf(input.charAt(input.length - 1));\n\n    let bytes = Math.ceil((3 * input.length) / 4.0);\n    if (lkey1 === 64) {\n        bytes -= 1;\n    } //padding chars, so skip\n    if (lkey2 === 64) {\n        bytes -= 1;\n    } //padding chars, so skip\n\n    let uarray;\n    let chr1;\n    let chr2;\n    let chr3;\n    let enc1;\n    let enc2;\n    let enc3;\n    let enc4;\n    let j = 0;\n\n    if (arrayBuffer) {\n        uarray = new Uint8Array(arrayBuffer);\n    } else {\n        uarray = new Uint8Array(bytes);\n    }\n\n    input = input.replace(/[^A-Za-z0-9+/=]/g, '');\n\n    for (let i = 0; i < bytes; i += 3) {\n        // get the 3 octets in 4 ascii chars\n        // eslint-disable-next-line no-plusplus\n        enc1 = _keyStr.indexOf(input.charAt(j++));\n        // eslint-disable-next-line no-plusplus\n        enc2 = _keyStr.indexOf(input.charAt(j++));\n        // eslint-disable-next-line no-plusplus\n        enc3 = _keyStr.indexOf(input.charAt(j++));\n        // eslint-disable-next-line no-plusplus\n        enc4 = _keyStr.indexOf(input.charAt(j++));\n\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n\n        uarray[i] = chr1;\n        if (enc3 !== 64) {\n            uarray[i+1] = chr2;\n        }\n        if (enc4 !== 64) {\n            uarray[i+2] = chr3;\n        }\n    }\n\n    return uarray;\n}\n","/*\n    ----------------------------------------------------------\n    Web Audio API - OGG or MPEG Sound bank\n    ----------------------------------------------------------\n    http://webaudio.github.io/web-audio-api/\n    ----------------------------------------------------------\n*/\nimport { DEBUG } from './debug.js';\nimport { channels, GM, keyToNote } from './gm.js';\nimport * as Base64Binary from './shim/Base64binary.js';\n\nexport const api = 'webaudio';\n\n// information to share with loader...\nexport const shared_root_info = {};\n\n// const audioContext = null; // new AudioContext();\nconst useStreamingBuffer = false; // !!audioContext.createMediaElementSource;\nlet ctx; // audio context\nconst sources = {};\nconst effects = {};\nlet masterVolume = 127;\nconst audioBuffers = {};\n\nexport const connect = opts => {\n    setContext(ctx || createAudioContext(), opts.onsuccess);\n};\n\n\n// plugin-common methods\n\n// Not applicable methods\nexport const playChannel = () => {};\nexport const stopChannel = () => {};\nexport const send = (data, delay) => { };\nexport const setController = (channelId, type, value, delay) => { };\n\nexport const setVolume = (channelId, volume, delay) => {\n    if (delay) {\n        setTimeout(() => {\n            masterVolume = volume;\n        }, delay * 1000);\n    } else {\n        masterVolume = volume;\n    }\n};\n\nexport const programChange = (channelId, program, delay) => {\n    // delay is ignored\n    const channel = channels[channelId];\n    if (channel) {\n        channel.program = program;\n    }\n};\n\nexport const pitchBend = (channelId, bend, delay) => {\n    // delay is ignored\n    const channel = channels[channelId];\n    if (channel) {\n        if (delay) {\n            setTimeout(\n                () => { channel.pitchBend = bend; return undefined; },\n                delay\n            );\n        } else {\n            channel.pitchBend = bend;\n        }\n    }\n};\n\nexport const noteOn = (channelId, noteId, velocity, delay=0) => {\n    // check whether the note exists\n    const channel = channels[channelId];\n    const program = channel.program;\n    const bufferId = program + 'x' + noteId;\n    const buffer = audioBuffers[bufferId];\n    if (!buffer) {\n        if (DEBUG) {\n            console.log('no buffer', GM.byId[program].id, program, channelId);\n        }\n        return undefined;\n    }\n    if (!ctx) {\n        if (DEBUG) {\n            console.log('no context!');\n        }\n        return undefined;\n    }\n\n\n    // convert relative delay to absolute delay\n    if (delay < ctx.currentTime) {\n        delay += ctx.currentTime;\n    }\n\n    // create audio buffer\n    let source;\n    if (useStreamingBuffer) {\n        source = ctx.createMediaElementSource(buffer);\n    } else { // XMLHttp buffer\n        source = ctx.createBufferSource();\n        source.buffer = buffer;\n    }\n\n    // add effects to buffer\n    if (effects) {\n        let chain = source;\n        for (const key of Object.keys(effects)) {\n            chain.connect(effects[key].input);\n            chain = effects[key];\n        }\n    }\n\n    // add gain + pitchShift\n    const gain = (velocity / 127) * (masterVolume / 127) * 2 - 1;\n    source.connect(ctx.destination);\n    source.playbackRate.value = 1; // pitch shift\n    source.gainNode = ctx.createGain(); // gain\n    source.gainNode.connect(ctx.destination);\n    source.gainNode.gain.value = Math.min(1.0, Math.max(-1.0, gain));\n    source.connect(source.gainNode);\n\n    if (useStreamingBuffer) {\n        if (delay) {\n            return setTimeout(() => {\n                buffer.currentTime = 0;\n                buffer.play();\n            }, delay * 1000);\n        } else {\n            buffer.currentTime = 0;\n            buffer.play();\n        }\n    } else {\n        source.start(delay || 0);\n    }\n\n    sources[channelId + 'x' + noteId] = source;\n\n    return source;\n};\n\nexport const noteOff = (channelId, noteId, delay=0) => {\n    // check whether the note exists\n    const channel = channels[channelId];\n    const program = channel.program;\n    const bufferId = program + 'x' + noteId;\n    const buffer = audioBuffers[bufferId];\n    if (!ctx) {\n        if (DEBUG) {\n            console.log('no context!');\n        }\n        return undefined;\n    }\n\n    if (buffer) {\n        if (delay < ctx.currentTime) {\n            delay += ctx.currentTime;\n        }\n\n        const source = sources[channelId + 'x' + noteId];\n        if (source) {\n            if (source.gainNode) {\n                // @Miranet: 'the values of 0.2 and 0.3 could of course be used as\n                // a 'release' parameter for ADSR like time settings.'\n                // add { 'metadata': { release: 0.3 } } to soundfont files\n                const gain = source.gainNode.gain;\n                gain.linearRampToValueAtTime(gain.value, delay);\n                gain.linearRampToValueAtTime(-1.0, delay + 0.3);\n            }\n            if (useStreamingBuffer) {\n                if (delay) {\n                    setTimeout(() => {\n                        buffer.pause();\n                    }, delay * 1000);\n                } else {\n                    buffer.pause();\n                }\n            } else {\n                if (source.noteOff) {\n                    source.noteOff(delay + 0.5);\n                } else {\n                    source.stop(delay + 0.5);\n                }\n            }\n\n            delete sources[channelId + 'x' + noteId];\n            return source;\n        }\n    }\n    return undefined;\n};\n\nexport const chordOn = (channel, chord, velocity, delay) => {\n    const res = {};\n    for (const note of chord) {\n        res[note] = noteOn(channel, note, velocity, delay);\n    }\n    return res;\n};\n\nexport const chordOff = (channel, chord, delay) => {\n    const res = {};\n    for (const note of chord) {\n        res[note] = noteOff(channel, note, delay);\n    }\n    return res;\n};\n\n\n\nexport const stopAllNotes = () => {\n    if (!ctx) {\n        if (DEBUG) {\n            console.log('no context!');\n        }\n        return undefined;\n    }\n\n    for (const sid of Object.keys(sources)) {\n        let delay = 0;\n        if (delay < ctx.currentTime) {\n            delay += ctx.currentTime;\n        }\n        const source = sources[sid];\n        source.gain.linearRampToValueAtTime(1, delay);\n        source.gain.linearRampToValueAtTime(0, delay + 0.3);\n        if (source.noteOff) { // old api\n            source.noteOff(delay + 0.3);\n        } else { // new api\n            source.stop(delay + 0.3);\n        }\n        delete sources[sid];\n    }\n    return undefined;\n};\n\nexport const setEffects = list => {\n    if (ctx && ctx.tunajs) {\n        for (const data of list) {\n            const effect = new ctx.tunajs[data.type](data);\n            effect.connect(ctx.destination);\n            effects[data.type] = effect;\n        }\n    } else {\n        console.log('Effects module not installed.');\n    }\n};\n\nexport const getContext = () => ctx;\n\nexport const setContext = (newCtx, onsuccess, onprogress, onerror) => {\n    ctx = newCtx;\n\n    // tuna.js effects module - https://github.com/Dinahmoe/tuna\n    // eslint-disable-next-line no-undef\n    if (typeof Tuna !== 'undefined' && !(ctx.tunajs instanceof Tuna)) {\n        ctx.tunajs = new Tuna(ctx);     // eslint-disable-line no-undef\n    }\n\n    // loading audio files\n    const urls = [];\n    for (const key of Object.keys(keyToNote)) {\n        urls.push(key);\n    }\n\n    const waitForEnd = instrument => {\n        for (const key of Object.keys(bufferPending)) { // has pending items\n            if (bufferPending[key]) {\n                return;\n            }\n        }\n\n        if (onsuccess) { // run onsuccess once\n            onsuccess();\n            onsuccess = null;\n        }\n    };\n\n    const requestAudio = (soundfont, programId, index, key) => {\n        const url = soundfont[key];\n        if (url) {\n            bufferPending[programId] += 1;\n            loadAudio(url, buffer => {\n                buffer.id = key;\n                const noteId = keyToNote[key];\n                audioBuffers[programId + 'x' + noteId] = buffer;\n                bufferPending[programId] -= 1;\n\n                if (bufferPending[programId] === 0) {\n                    const percent = index / 87;\n                    if (DEBUG) {\n                        console.log(GM.byId[programId], 'processing: ', percent);\n                    }\n                    soundfont.isLoaded = true;\n                    waitForEnd(programId);\n                }\n            }, err => {\n                console.log(err);\n            });\n        }\n    };\n\n    const bufferPending = {};\n    for (const [instrument, soundfont] of Object.entries(shared_root_info.Soundfont)) {\n        if (soundfont.isLoaded) {\n            continue;\n        }\n\n        const spec = GM.byName[instrument];\n        if (spec) {\n            const programId = spec.program;\n\n            bufferPending[programId] = 0;\n\n            for (let index = 0; index < urls.length; index++) {\n                const key = urls[index];\n                requestAudio(soundfont, programId, index, key);\n            }\n        }\n    }\n    setTimeout(waitForEnd, 1);\n};\n\n/* Load audio file: streaming | base64 | arraybuffer\n---------------------------------------------------------------------- */\nexport const loadAudio = (url, onsuccess, onerror) => {\n    /**\n     * url is often a data.audio Base64 string\n     */\n    if (useStreamingBuffer) {\n        const audio = new Audio();\n        audio.src = url;\n        audio.controls = false;\n        audio.autoplay = false;\n        audio.preload = 'none';\n        audio.addEventListener('canplay', () => {\n            if (onsuccess) { onsuccess(audio); }\n        });\n        audio.addEventListener('error', err => {\n            if (onerror) { onerror(err); }\n        });\n        document.body.appendChild(audio);\n        return audio;\n    } else if (url.indexOf('data:audio') === 0) { // Base64 string\n        const base64 = url.split(',')[1];\n        const buffer = Base64Binary.decodeArrayBuffer(base64);\n        return ctx.decodeAudioData(buffer, onsuccess, onerror);\n    } else {  // XMLHttp buffer\n        const request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.responseType = 'arraybuffer';\n        request.onsuccess = () => ctx.decodeAudioData(request.response, onsuccess, onerror);\n        request.send();\n        return undefined;\n    }\n};\n\n// noinspection JSUnresolvedVariable\nexport const createAudioContext = () => new (window.AudioContext || window.webkitAudioContext)();\n","/*\n    ----------------------------------------------------------------------\n    Web MIDI API - Native Soundbanks\n    ----------------------------------------------------------------------\n    http://webaudio.github.io/web-midi-api/\n    ----------------------------------------------------------------------\n*/\nexport const api = 'webmidi';\n\n// information to share with loader...\nexport const shared_root_info = {};\n\nlet output = null;\n\nexport const connect = opts => {\n    const errFunction = err => {\n        console.error('Could not connect to web midi! Falling back to WebAudio:', err);\n        // we tried.  Anything that sort of supports webmidi should support WebAudio.\n        if (shared_root_info.webaudio_backup_connect) {\n            shared_root_info.config.api = 'webaudio';\n            shared_root_info.webaudio_backup_connect(opts);\n        }\n    };\n    navigator.requestMIDIAccess().then(access => {\n        const plugin = access;\n        const pluginOutputs = plugin.outputs;\n        if (typeof pluginOutputs === 'function') { // Chrome pre-43\n            // noinspection JSValidateTypes\n            output = pluginOutputs()[0];\n        } else { // Chrome post-43\n            output = pluginOutputs[0];\n        }\n        if (output === undefined) { // nothing there...\n            return errFunction('No outputs defined');\n        } else {\n            return opts.onsuccess && opts.onsuccess();\n        }\n    }, errFunction);\n};\n\n\n// plugin-common methods\n\n// not applicable methods:\nexport const playChannel = () => {};\nexport const stopChannel = () => {};\nexport const setEffects = () => {};\nexport const getContext = () => {};\nexport const setContext = () => {};\n\n\n\nexport const send = (data, delay) => { // set channel volume\n    output.send(data, delay * 1000);\n};\n\nexport const setController = (channel, type, value, delay) => {\n    output.send([channel, type, value], delay * 1000);\n};\n\nexport const setVolume = (channel, volume, delay) => { // set channel volume\n    output.send([0xB0 + channel, 0x07, volume], delay * 1000);\n};\n\nexport const programChange = (channel, program, delay) => { // change patch (instrument)\n    output.send([0xC0 + channel, program], delay * 1000);\n};\n\nexport const pitchBend = (channel, program, delay) => { // pitch bend\n    output.send([0xE0 + channel, program], delay * 1000);\n};\n\nexport const noteOn = (channel, note, velocity, delay) => {\n    output.send([0x90 + channel, note, velocity], delay * 1000);\n};\n\nexport const noteOff = (channel, note, delay) => {\n    output.send([0x80 + channel, note, 0], delay * 1000);\n};\n\nexport const chordOn = (channel, chord, velocity, delay) => {\n    for (const note of chord) {\n        output.send([0x90 + channel, note, velocity], delay * 1000);\n    }\n};\n\nexport const chordOff = (channel, chord, delay) => {\n    for (const note of chord) {\n        output.send([0x80 + channel, note, 0], delay * 1000);\n    }\n};\n\nexport const stopAllNotes = () => {\n    output.cancel();\n    for (let channel = 0; channel < 16; channel++) {\n        output.send([0xB0 + channel, 0x7B, 0]);\n    }\n};\n\n","/* Wrapper for accessing strings through sequential reads */\n/* now an ES6 class -- MSC 2019 */\n\nexport class Stream {\n    constructor(str) {\n        this.str = str;\n        this.position = 0;\n    }\n\n    read(length) {\n        const result = this.str.substr(this.position, length);\n        this.position += length;\n        return result;\n    }\n\n    /* read a big-endian 32-bit integer */\n    readInt32() {\n        const result = (\n            (this.str.charCodeAt(this.position) << 24)\n            + (this.str.charCodeAt(this.position + 1) << 16)\n            + (this.str.charCodeAt(this.position + 2) << 8)\n            + this.str.charCodeAt(this.position + 3));\n        this.position += 4;\n        return result;\n    }\n\n    /* read a big-endian 16-bit integer */\n    readInt16() {\n        const result = (\n            (this.str.charCodeAt(this.position) << 8)\n            + this.str.charCodeAt(this.position + 1));\n        this.position += 2;\n        return result;\n    }\n\n    /* read an 8-bit integer */\n    readInt8(signed) {\n        let result = this.str.charCodeAt(this.position);\n        if (signed && result > 127) {\n            result -= 256;\n        }\n        this.position += 1;\n        return result;\n    }\n\n    eof() {\n        return this.position >= this.str.length;\n    }\n\n    /** read a MIDI-style variable-length integer\n     *   (big-endian value in groups of 7 bits,\n     *   with top bit set to signify that another byte follows)\n     */\n    readVarInt() {\n        let result = 0;\n        while (true) {\n            const b = this.readInt8();\n            // noinspection JSBitwiseOperatorUsage\n            if (b & 0x80) {\n                result += (b & 0x7f);\n                result <<= 7;\n            } else {\n                /* b is the last byte */\n                return result + b;\n            }\n        }\n    }\n}\n","/*\nclass to parse the .mid file format\n(depends on stream.js -- no relationship to music21's Stream)\n*/\nimport { Stream } from './stream.js';\n\nexport class MidiFileClass {\n    constructor(data) {\n        this.data = data;\n        this.stream = new Stream(data);\n        this.lastEventTypeByte = undefined;\n    }\n\n    readChunk(stream) {\n        const id = stream.read(4);\n        const length = stream.readInt32();\n        return {\n            'id': id,\n            'length': length,\n            'data': stream.read(length),\n        };\n    }\n\n    readEvent(stream) {\n        const event = {};\n        event.deltaTime = stream.readVarInt();\n        let eventTypeByte = stream.readInt8();\n        if ((eventTypeByte & 0xf0) === 0xf0) {\n            /* system / meta event */\n            if (eventTypeByte === 0xff) {\n                /* meta event */\n                event.type = 'meta';\n                const subtypeByte = stream.readInt8();\n                const length = stream.readVarInt();\n                switch (subtypeByte) {\n                case 0x00:\n                    event.subtype = 'sequenceNumber';\n                    if (length !== 2) {\n                        throw new Error('Expected length for sequenceNumber event is 2, got ' + length);\n                    }\n                    event.number = stream.readInt16();\n                    return event;\n                case 0x01:\n                    event.subtype = 'text';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x02:\n                    event.subtype = 'copyrightNotice';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x03:\n                    event.subtype = 'trackName';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x04:\n                    event.subtype = 'instrumentName';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x05:\n                    event.subtype = 'lyrics';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x06:\n                    event.subtype = 'marker';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x07:\n                    event.subtype = 'cuePoint';\n                    event.text = stream.read(length);\n                    return event;\n                case 0x20:\n                    event.subtype = 'midiChannelPrefix';\n                    if (length !== 1) {\n                        throw new Error('Expected length for midiChannelPrefix event is 1, got ' + length);\n                    }\n                    event.channel = stream.readInt8();\n                    return event;\n                case 0x2f:\n                    event.subtype = 'endOfTrack';\n                    if (length !== 0) {\n                        throw new Error('Expected length for endOfTrack event is 0, got ' + length);\n                    }\n                    return event;\n                case 0x51:\n                    event.subtype = 'setTempo';\n                    if (length !== 3) {\n                        throw new Error('Expected length for setTempo event is 3, got ' + length);\n                    }\n                    event.microsecondsPerBeat = (\n                        (stream.readInt8() << 16)\n                        + (stream.readInt8() << 8)\n                        + stream.readInt8()\n                    );\n                    return event;\n                case 0x54:\n                    event.subtype = 'smpteOffset';\n                    if (length !== 5) {\n                        throw new Error('Expected length for smpteOffset event is 5, got ' + length);\n                    }\n                    // eslint-disable-next-line no-case-declarations\n                    const hourByte = stream.readInt8();\n                    event.frameRate = {\n                        0x00: 24,\n                        0x20: 25,\n                        0x40: 29,\n                        0x60: 30,\n                    }[hourByte & 0x60];\n                    event.hour = hourByte & 0x1f;\n                    event.min = stream.readInt8();\n                    event.sec = stream.readInt8();\n                    event.frame = stream.readInt8();\n                    event.subframe = stream.readInt8();\n                    return event;\n                case 0x58:\n                    event.subtype = 'timeSignature';\n                    if (length !== 4) {\n                        throw new Error('Expected length for timeSignature event is 4, got ' + length);\n                    }\n                    event.numerator = stream.readInt8();\n                    event.denominator = 2**stream.readInt8();\n                    event.metronome = stream.readInt8();\n                    event.thirtyseconds = stream.readInt8();\n                    return event;\n                case 0x59:\n                    event.subtype = 'keySignature';\n                    if (length !== 2) {\n                        throw new Error('Expected length for keySignature event is 2, got ' + length);\n                    }\n                    event.key = stream.readInt8(true);\n                    event.scale = stream.readInt8();\n                    return event;\n                case 0x7f:\n                    event.subtype = 'sequencerSpecific';\n                    event.data = stream.read(length);\n                    return event;\n                default:\n                    // console.log(\"Unrecognised meta event subtype: \" + subtypeByte);\n                    event.subtype = 'unknown';\n                    event.data = stream.read(length);\n                    return event;\n                }\n            } else if (eventTypeByte === 0xf0) {\n                event.type = 'sysEx';\n                const length = stream.readVarInt();\n                event.data = stream.read(length);\n                return event;\n            } else if (eventTypeByte === 0xf7) {\n                event.type = 'dividedSysEx';\n                const length = stream.readVarInt();\n                event.data = stream.read(length);\n                return event;\n            } else {\n                throw new Error('Unrecognised MIDI event type byte: ' + eventTypeByte);\n            }\n        } else {\n            /* channel event */\n            let param1;\n            if ((eventTypeByte & 0x80) === 0) {\n                /* running status - reuse lastEventTypeByte as the event type.\n                   eventTypeByte is actually the first parameter\n                */\n                param1 = eventTypeByte;\n                eventTypeByte = this.lastEventTypeByte;\n            } else {\n                param1 = stream.readInt8();\n                this.lastEventTypeByte = eventTypeByte;\n            }\n            const eventType = eventTypeByte >> 4;\n            event.channel = eventTypeByte & 0x0f;\n            event.type = 'channel';\n            switch (eventType) {\n            case 0x08:\n                event.subtype = 'noteOff';\n                event.noteNumber = param1;\n                event.velocity = stream.readInt8();\n                return event;\n            case 0x09:\n                event.noteNumber = param1;\n                event.velocity = stream.readInt8();\n                if (event.velocity === 0) {\n                    event.subtype = 'noteOff';\n                } else {\n                    event.subtype = 'noteOn';\n                }\n                return event;\n            case 0x0a:\n                event.subtype = 'noteAftertouch';\n                event.noteNumber = param1;\n                event.amount = stream.readInt8();\n                return event;\n            case 0x0b:\n                event.subtype = 'controller';\n                event.controllerType = param1;\n                event.value = stream.readInt8();\n                return event;\n            case 0x0c:\n                event.subtype = 'programChange';\n                event.programNumber = param1;\n                return event;\n            case 0x0d:\n                event.subtype = 'channelAftertouch';\n                event.amount = param1;\n                return event;\n            case 0x0e:\n                event.subtype = 'pitchBend';\n                event.value = param1 + (stream.readInt8() << 7);\n                return event;\n            default:\n                throw new Error('Unrecognised MIDI event type: ' + eventType);\n                /*\n                 * console.log(\"Unrecognised MIDI event type: \" + eventType);\n                 * stream.readInt8();\n                 * event.subtype = 'unknown';\n                 * return event;\n                 */\n            }\n        }\n    }\n\n    parseAndReturn() {\n        const stream = this.stream;\n        const headerChunk = this.readChunk(stream);\n        if (headerChunk.id !== 'MThd' || headerChunk.length !== 6) {\n            throw new Error('Bad .mid file - header not found');\n        }\n        const headerStream = new Stream(headerChunk.data);\n        const formatType = headerStream.readInt16();\n        const trackCount = headerStream.readInt16();\n        const timeDivision = headerStream.readInt16();\n\n        let ticksPerBeat;\n        // noinspection JSBitwiseOperatorUsage\n        if (timeDivision & 0x8000) {\n            throw new Error('Expressing time division in SMTPE frames is not supported yet');\n        } else {\n            ticksPerBeat = timeDivision;\n        }\n\n        const header = {\n            'formatType': formatType,\n            'trackCount': trackCount,\n            'ticksPerBeat': ticksPerBeat,\n        };\n        const tracks = [];\n        for (let i = 0; i < header.trackCount; i++) {\n            tracks[i] = [];\n            const trackChunk = this.readChunk(stream);\n            if (trackChunk.id !== 'MTrk') {\n                throw new Error('Unexpected chunk - expected MTrk, got '+ trackChunk.id);\n            }\n            const trackStream = new Stream(trackChunk.data);\n            while (!trackStream.eof()) {\n                const event = this.readEvent(trackStream);\n                tracks[i].push(event);\n                //console.log(event);\n            }\n        }\n        return {\n            'header': header,\n            'tracks': tracks,\n        };\n    }\n}\n\nexport function MidiFile(data) {\n    const midiFileObject = new MidiFileClass(data);\n    return midiFileObject.parseAndReturn();\n}\n","/**\n * Replayer class -- factored from function by MSC July 2019\n *\n */\n\n\n/**\n * Clone any object\n *\n * @param {*} o\n * @returns {Array|*}\n */\nconst clone = o => {\n    if (typeof o !== 'object') {\n        return o;\n    }\n    if (o == null) {\n        return o;\n    }\n    const ret = (typeof o.length === 'number') ? [] : {};\n    // eslint-disable-next-line guard-for-in\n    for (const key in o) {\n        // noinspection JSUnfilteredForInLoop\n        ret[key] = clone(o[key]);\n    }\n    return ret;\n};\n\nexport class Replayer {\n    constructor(midiFile, timeWarp, eventProcessor, bpm) {\n        this.midiFile = midiFile;\n        this.timeWarp = timeWarp;\n        this.eventProcessor = eventProcessor;\n        this.trackStates = [];\n        this.beatsPerMinute = bpm || 120;\n        this.bpmOverride = !!bpm;\n        this.ticksPerBeat = midiFile.header.ticksPerBeat;\n\n        for (let i = 0; i < midiFile.tracks.length; i++) {\n            this.trackStates[i] = {\n                'nextEventIndex': 0,\n                'ticksToNextEvent': (\n                    midiFile.tracks[i].length\n                        ? midiFile.tracks[i][0].deltaTime\n                        : null\n                ),\n            };\n        }\n        this.temporal = [];\n        this.processEvents();\n    }\n\n    getNextEvent() {\n        let ticksToNextEvent = null;\n        let nextEventTrack = null;\n        let nextEventIndex = null;\n\n        for (let i = 0; i < this.trackStates.length; i++) {\n            if (\n                this.trackStates[i].ticksToNextEvent != null\n                && (ticksToNextEvent == null || this.trackStates[i].ticksToNextEvent < ticksToNextEvent)\n            ) {\n                ticksToNextEvent = this.trackStates[i].ticksToNextEvent;\n                nextEventTrack = i;\n                nextEventIndex = this.trackStates[i].nextEventIndex;\n            }\n        }\n        if (nextEventTrack != null) {\n            /* consume event from that track */\n            const nextEvent = this.midiFile.tracks[nextEventTrack][nextEventIndex];\n            if (this.midiFile.tracks[nextEventTrack][nextEventIndex + 1]) {\n                this.trackStates[nextEventTrack].ticksToNextEvent += this.midiFile.tracks[nextEventTrack][nextEventIndex + 1].deltaTime;\n            } else {\n                this.trackStates[nextEventTrack].ticksToNextEvent = null;\n            }\n            this.trackStates[nextEventTrack].nextEventIndex += 1;\n            /* advance timings on all tracks by ticksToNextEvent */\n            for (let i = 0; i < this.trackStates.length; i++) {\n                if (this.trackStates[i].ticksToNextEvent != null) {\n                    this.trackStates[i].ticksToNextEvent -= ticksToNextEvent;\n                }\n            }\n            return {\n                'ticksToEvent': ticksToNextEvent,\n                'event': nextEvent,\n                'track': nextEventTrack,\n            };\n        } else {\n            return null;\n        }\n    }\n\n    processEvents() {\n        let midiEvent = this.getNextEvent();\n        while (midiEvent) {\n            if (!this.bpmOverride && midiEvent.event.type === 'meta' && midiEvent.event.subtype === 'setTempo') {\n                // tempo change events can occur anywhere in the middle and affect events that follow\n                this.beatsPerMinute = 60000000 / midiEvent.event.microsecondsPerBeat;\n            }\n            //\n            let beatsToGenerate = 0;\n            let secondsToGenerate = 0;\n            if (midiEvent.ticksToEvent > 0) {\n                beatsToGenerate = midiEvent.ticksToEvent / this.ticksPerBeat;\n                secondsToGenerate = beatsToGenerate / (this.beatsPerMinute / 60);\n            }\n\n            const time = (secondsToGenerate * 1000 * this.timeWarp) || 0;\n            this.temporal.push([midiEvent, time]);\n            midiEvent = this.getNextEvent();\n        }\n    }\n\n    getData() {\n        return clone(this.temporal);\n    }\n}\n","/*\n    ----------------------------------------------------------\n    MIDI.Player\n    ----------------------------------------------------------\n    https://github.com/mscuthbert/midicube\n    ----------------------------------------------------------\n*/\nimport { channels, GM } from './gm.js';\nimport { MidiFile } from '../inc/jasmid/midifile.js';\nimport { Replayer } from '../inc/jasmid/replayer.js';\n\nexport class PlayInstance {\n    /**\n     *\n     * @param {Object} plugin -- WebAudio, WebMidi, AudioTag\n     */\n    constructor(plugin) {\n        this.plugin = plugin;\n        this.currentTime = 0;\n        this.endTime = 0;\n        this.restart = 0;\n        this.playing = false;\n        this.timeWarp = 1;\n        this.startDelay = 0;\n        this.BPM = undefined;\n\n        this.data = [];\n        this.eventQueue = []; // hold events to be triggered\n        this.queuedTime = 0.0; //\n        this.startTime = 0; // to measure time elapse\n        this.noteRegistrar = {}; // get event for requested note\n        this.onMidiEvent = undefined; // listener\n        this.MIDIOffset = 0; // not sure what used for.  A transposition?\n\n        this.frame = undefined;\n\n        this.__now = undefined;\n\n    }\n\n    start(onsuccess) {\n        if (this.currentTime < -1) {\n            this.currentTime = -1;\n        }\n        this.startAudio(this.currentTime, null, onsuccess);\n    }\n\n    resume(onsuccess) {\n        this.start(onsuccess);\n    }\n\n    pause() {\n        const tmp = this.restart;\n        this.stopAudio();\n        this.restart = tmp;\n    }\n\n    stop() {\n        this.stopAudio();\n        this.restart = 0;\n        this.currentTime = 0;\n    }\n\n    addListener(onsuccess) {\n        this.onMidiEvent = onsuccess;\n    }\n\n    removeListener() {\n        this.onMidiEvent = undefined;\n    }\n\n    clearAnimation() {\n        if (this.animationFrameId)  {\n            cancelAnimationFrame(this.animationFrameId);\n        }\n    }\n\n    setAnimation(callback) {\n        let currentTime = 0;\n        let tOurTime = 0;\n        let tTheirTime = 0;\n        this.clearAnimation();\n        this.frame = () => {\n            this.animationFrameId = requestAnimationFrame(this.frame);\n\n            if (this.endTime === 0) {\n                return;\n            }\n            if (this.playing) {\n                currentTime = (tTheirTime === this.currentTime) ? tOurTime - Date.now() : 0;\n                if (this.currentTime === 0) {\n                    currentTime = 0;\n                } else {\n                    currentTime = this.currentTime - currentTime;\n                }\n                if (tTheirTime !== this.currentTime) {\n                    tOurTime = Date.now();\n                    tTheirTime = this.currentTime;\n                }\n            } else { // paused\n                currentTime = this.currentTime;\n            }\n\n            const endTime = this.endTime;\n            // const percent = currentTime / endTime;\n            const total = currentTime / 1000;\n            const minutes = total / 60;\n            const seconds = total - (minutes * 60);\n            const t1 = minutes * 60 + seconds;\n            const t2 = (endTime / 1000);\n\n            if (t2 - t1 < -1.0) {\n                // noinspection UnnecessaryReturnStatementJS\n\n            } else {\n                callback({\n                    now: t1,\n                    end: t2,\n                    events: this.noteRegistrar,\n                });\n            }\n        };\n\n        requestAnimationFrame(this.frame);\n    }\n\n    loadMidiFile(onsuccess, onprogress, onerror) {\n        try {\n            this.replayer = new Replayer(MidiFile(this.currentData), this.timeWarp, null, this.BPM);\n            this.data = this.replayer.getData();\n            this.endTime = this.getLength();\n\n            this.loadPlugin({\n                // instruments: this.getFileInstruments(),\n                onsuccess,\n                onprogress,\n                onerror,\n            });\n        } catch (event) {\n            if (onerror) {\n                onerror(event);\n            }\n        }\n    }\n\n    loadPlugin(...options) {  // override in subclasses\n    }\n\n    loadFile(file, onsuccess, onprogress, onerror) {\n        this.stop();\n        if (file.indexOf('base64,') !== -1) {\n            this.currentData = atob(file.split(',')[1]);\n            this.loadMidiFile(onsuccess, onprogress, onerror);\n        } else {\n            const fetch = new XMLHttpRequest();\n            fetch.open('GET', file);\n            fetch.overrideMimeType('text/plain; charset=x-user-defined');\n            fetch.onreadystatechange = () => {\n                if (fetch.readyState === 4) {\n                    if (fetch.status === 200) {\n                        const t = fetch.responseText || '';\n                        const ff = [];\n                        const mx = t.length;\n                        const scc = String.fromCharCode;\n                        for (let z = 0; z < mx; z++) {\n                            ff[z] = scc(t.charCodeAt(z) & 255);\n                        }\n\n                        this.currentData = ff.join('');\n                        this.loadMidiFile(onsuccess, onprogress, onerror);\n                    } else {\n                        if (onerror) {\n                            onerror('Unable to load MIDI file');\n                        }\n                    }\n                }\n            };\n            fetch.send();\n        }\n    }\n\n    getFileInstruments() {\n        const instruments = {};\n        const programs = {};\n        for (let n = 0; n < this.data.length; n++) {\n            const event = this.data[n][0].event;\n            if (event.type !== 'channel') {\n                continue;\n            }\n            const channel = event.channel;\n            switch (event.subtype) {\n            case 'controller': {\n                // console.log(event.channel, MIDI.defineControl[event.controllerType], event.value);\n                break;\n            }\n            case 'programChange': {\n                programs[channel] = event.programNumber;\n                break;\n            }\n            case 'noteOn': {\n                const program = programs[channel];\n                const use_value = !Number.isNaN(parseInt(program)) ? program : channel;\n                const gm = GM.byId[use_value];\n                instruments[gm.id] = true;\n                break;\n            }\n            default: {\n                break;\n            }\n            }\n        }\n        const ret = [];\n        for (const key of Object.keys(instruments)) {\n            ret.push(key);\n        }\n        return ret;\n    }\n\n    // Playing the audio\n\n    // noinspection JSUnusedLocalSymbols\n    scheduleTracking(channel, note, currentTime, offset, message, velocity, time) {\n        return setTimeout(() => {\n            const data = {\n                channel,\n                note,\n                now: currentTime,\n                end: this.endTime,\n                message,\n                velocity,\n            };\n            if (message === 128) {\n                delete this.noteRegistrar[note];\n            } else {\n                this.noteRegistrar[note] = data;\n            }\n            if (this.onMidiEvent) {\n                this.onMidiEvent(data);\n            }\n            this.currentTime = currentTime;\n            this.eventQueue.shift();\n\n            if (this.eventQueue.length < 1000) {\n                this.startAudio(this.queuedTime, true);\n            } else if (this.currentTime === this.queuedTime && this.queuedTime < this.endTime) { // grab next sequence\n                this.startAudio(this.queuedTime, true);\n            }\n        }, currentTime - offset);\n    }\n\n    getContext() {\n        if (this.plugin.api === 'webaudio') {\n            return this.plugin.getContext();\n        } else {\n            this.ctx = {currentTime: 0};\n        }\n        return this.ctx;\n    }\n\n    getLength() {\n        const data = this.data;\n        const length = data.length;\n        let totalTime = 0.5;\n        for (let n = 0; n < length; n++) {\n            totalTime += data[n][1];\n        }\n        return totalTime;\n    }\n\n    getNow() {\n        if (window.performance && window.performance.now) {\n            return window.performance.now();\n        } else {\n            return Date.now();\n        }\n    }\n\n    startAudio(currentTime, fromCache, onsuccess) {\n        if (!this.replayer) {\n            return;\n        }\n        if (!fromCache) {\n            if (typeof currentTime === 'undefined') {\n                currentTime = this.restart;\n            }\n            if (this.playing) {\n                this.stopAudio();\n            }\n            this.playing = true;\n            this.data = this.replayer.getData();\n            this.endTime = this.getLength();\n        }\n\n        let note;\n        let offset = 0;\n        let messages = 0;\n        const data = this.data;\n        const ctx = this.getContext();\n        const length = data.length;\n\n        this.queuedTime = 0.5;\n\n        // const interval = this.eventQueue[0] && this.eventQueue[0].interval || 0;\n        const foffset = currentTime - this.currentTime;\n\n        if (this.plugin.api !== 'webaudio') { // set currentTime on ctx\n            const now = this.getNow();\n            this.__now = this.__now || now;\n            ctx.currentTime = (now - this.__now) / 1000;\n        }\n\n        this.startTime = ctx.currentTime;\n\n        for (let n = 0; n < length && messages < 100; n++) {\n            const obj = data[n];\n            this.queuedTime += obj[1];\n            if (this.queuedTime <= currentTime) {\n                offset = this.queuedTime;\n                continue;\n            }\n\n            currentTime = this.queuedTime - offset;\n\n            const event = obj[0].event;\n            if (event.type !== 'channel') {\n                continue;\n            }\n\n            const channelId = event.channel;\n            const channel = channels[channelId];\n            const delay = ctx.currentTime + ((currentTime + foffset + this.startDelay) / 1000);\n            const queueTime = this.queuedTime - offset + this.startDelay;\n            switch (event.subtype) {\n            case 'controller':\n                // noinspection JSUnresolvedFunction\n                this.plugin.setController(channelId, event.controllerType, event.value, delay);\n                break;\n            case 'programChange':\n                // noinspection JSUnresolvedFunction\n                this.plugin.programChange(channelId, event.programNumber, delay);\n                break;\n            case 'pitchBend':\n                this.plugin.pitchBend(channelId, event.value, delay);\n                break;\n            case 'noteOn':\n                if (channel.mute) { break; }\n                note = event.noteNumber - (this.MIDIOffset || 0);\n                this.eventQueue.push({\n                    event,\n                    time: queueTime,\n                    source: this.plugin.noteOn(channelId, event.noteNumber, event.velocity, delay),\n                    interval: this.scheduleTracking(\n                        channelId,\n                        note,\n                        this.queuedTime + this.startDelay,\n                        offset - foffset,\n                        144,\n                        event.velocity\n                    ),\n                });\n                messages += 1;\n                break;\n            case 'noteOff':\n                if (channel.mute) {\n                    break;\n                }\n                note = event.noteNumber - (this.MIDIOffset || 0);\n                this.eventQueue.push({\n                    event,\n                    time: queueTime,\n                    source: this.plugin.noteOff(channelId, event.noteNumber, delay),\n                    interval: this.scheduleTracking(\n                        channelId,\n                        note,\n                        this.queuedTime,\n                        offset - foffset,\n                        128,\n                        0\n                    ),\n                });\n                break;\n            default:\n                break;\n            }\n        }\n        if (onsuccess) {\n            onsuccess(this.eventQueue);\n        }\n    }\n\n    stopAudio() {\n        const ctx = this.getContext();\n        this.playing = false;\n        this.restart += (ctx.currentTime - this.startTime) * 1000;\n\n        // stop the audio, and intervals\n        while (this.eventQueue.length) {\n            const o = this.eventQueue.pop();\n            window.clearInterval(o.interval);\n            if (!o.source) {\n                continue; // is not webaudio\n            }\n            if (typeof (o.source) === 'number') {\n                window.clearTimeout(o.source);\n            } else { // webaudio\n                o.source.disconnect(0);\n            }\n        }\n\n        // run callback to cancel any notes still playing\n        for (const key of Object.keys(this.noteRegistrar)) {\n            const o = this.noteRegistrar[key];\n            if (this.noteRegistrar[key].message === 144 && this.onMidiEvent) {\n                this.onMidiEvent({\n                    channel: o.channel,\n                    note: o.note,\n                    now: o.now,\n                    end: o.end,\n                    message: 128,\n                    velocity: o.velocity,\n                });\n            }\n        }\n\n        // reset noteRegistrar\n        this.noteRegistrar = {};\n    }\n}\n","/* \n    ----------------------------------------------------------\n    Color Space : 1.2 : 2012.11.06\n    ----------------------------------------------------------\n    https://github.com/mudcube/Color.Space.js\n    ----------------------------------------------------------\n    RGBA <-> HSLA  <-> W3\n    RGBA <-> HSVA\n    RGBA <-> CMY   <-> CMYK\n    RGBA <-> HEX24 <-> W3\n    RGBA <-> HEX32\n    RGBA <-> W3\n    ----------------------------------------------------------\n    Examples\n    ----------------------------------------------------------\n    Color.Space(0x99ff0000, \"HEX32>RGBA>HSLA>W3\"); // outputs \"hsla(60,100%,17%,0.6)\"\n    Color.Space(0xFF0000, \"HEX24>RGB>HSL\"); // convert hex24 to HSL object.\n    ----------------------------------------------------------\n    W3 values\n    ----------------------------------------------------------\n    rgb(255,0,0)\n    rgba(255,0,0,1)\n    rgb(100%,0%,0%)\n    rgba(100%,0%,0%,1)\n    hsl(120, 100%, 50%)\n    hsla(120, 100%, 50%, 1)\n    #000000\n    ----------------------------------------------------------\n*/\n\nexport const Color = {};\nColor.Space = {};\n\n// eslint-disable-next-line func-names\n(function () {\n\n    const functions = {\n        // holds generated cached conversion functions.\n    };\n\n    const shortcuts = {\n        'HEX24>HSL': 'HEX24>RGB>HSL',\n        'HEX32>HSLA': 'HEX32>RGBA>HSLA',\n        'HEX24>CMYK': 'HEX24>RGB>CMY>CMYK',\n        'RGB>CMYK': 'RGB>CMY>CMYK',\n    };\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    const root = Color.Space = function (color, route) {\n        if (shortcuts[route]) { // shortcut available\n            route = shortcuts[route];\n        }\n        const r = route.split('>');\n        // check whether color is an [], if so, convert to {}\n        if (typeof (color) === 'object' && color[0] >= 0) { // array\n            const type = r[0];\n            const tmp = {};\n            for (let i = 0; i < type.length; i++) {\n                const str = type.substr(i, 1);\n                tmp[str] = color[i];\n            }\n            color = tmp;\n        }\n        if (functions[route]) { // cached function available\n            return functions[route](color);\n        }\n        for (let pos = 1, key = r[0]; pos < r.length; pos++) {\n            if (pos > 1) { // recycle previous\n                key = key.substr(key.indexOf('_') + 1);\n            }\n            key += (pos === 0 ? '' : '_') + r[pos];\n            color = root[key](color);\n        }\n        return color;\n    };\n\n    // W3C - RGB + RGBA\n\n    // eslint-disable-next-line func-names\n    root.RGB_W3 = function (o) {\n        return 'rgb(' + (o.R >> 0) + ',' + (o.G >> 0) + ',' + (o.B >> 0) + ')'; \n    };\n\n    // eslint-disable-next-line func-names\n    root.RGBA_W3 = function (o) {\n        const alpha = typeof (o.A) === 'number' ? o.A / 255 : 1;\n        return 'rgba(' + (o.R >> 0) + ',' + (o.G >> 0) + ',' + (o.B >> 0) + ',' + alpha + ')'; \n    };\n\n    // eslint-disable-next-line func-names\n    root.W3_RGB = function (o) {\n        const o_arr = o.substr(4, o.length - 5).split(',');\n        return {\n            R: parseInt(o_arr[0]),\n            G: parseInt(o_arr[1]),\n            B: parseInt(o_arr[2]),\n        };\n    };\n\n    // eslint-disable-next-line func-names\n    root.W3_RGBA = function (o) {\n        const o_arr = o.substr(5, o.length - 6).split(',');\n        return {\n            R: parseInt(o_arr[0]),\n            G: parseInt(o_arr[1]),\n            B: parseInt(o_arr[2]),\n            A: parseFloat(o_arr[3]) * 255,\n        };\n    };\n\n    // W3C - HSL + HSLA\n\n    // eslint-disable-next-line func-names\n    root.HSL_W3 = function (o) {\n        return 'hsl(' + ((o.H + 0.5) >> 0) + ',' + ((o.S + 0.5) >> 0) + '%,' + ((o.L + 0.5) >> 0) + '%)'; \n    };\n\n    // eslint-disable-next-line func-names\n    root.HSLA_W3 = function (o) {\n        const alpha = typeof (o.A) === 'number' ? o.A / 255 : 1;\n        return 'hsla(' + ((o.H + 0.5) >> 0) + ',' + ((o.S + 0.5) >> 0) + '%,' + ((o.L + 0.5) >> 0) + '%,' + alpha + ')'; \n    };\n\n    // eslint-disable-next-line func-names\n    root.W3_HSL = function (o) {\n        const o_arr = o.substr(4, o.length - 5).split(',');\n        return {\n            H: parseInt(o_arr[0]),\n            S: parseInt(o_arr[1]),\n            L: parseInt(o_arr[2]),\n        };\n    };\n\n    // eslint-disable-next-line func-names\n    root.W3_HSLA = function (o) {\n        const o_arr = o.substr(5, o.length - 6).split(',');\n        return {\n            H: parseInt(o_arr[0]),\n            S: parseInt(o_arr[1]),\n            L: parseInt(o_arr[2]),\n            A: parseFloat(o_arr[3]) * 255,\n        };\n    };\n\n    // W3 HEX = \"FFFFFF\" | \"FFFFFFFF\"\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.W3_HEX = root.W3_HEX24 = function (o) {\n        if (o.substr(0, 1) === '#') {\n            o = o.substr(1);\n        }\n        if (o.length === 3) {\n            o = o[0] + o[0] + o[1] + o[1] + o[2] + o[2];\n        }\n        return parseInt('0x' + o);\n    };\n\n    // eslint-disable-next-line func-names\n    root.W3_HEX32 = function (o) {\n        if (o.substr(0, 1) === '#') {\n            o = o.substr(1);\n        }\n        if (o.length === 6) {\n            return parseInt('0xFF' + o);\n        } else {\n            return parseInt('0x' + o);\n        }\n    };\n\n    // HEX = 0x000000 -> 0xFFFFFF\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.HEX_W3 = root.HEX24_W3 = function (o, maxLength) {\n        if (!maxLength) {\n            maxLength = 6;\n        }\n        if (!o) {\n            o = 0;\n        }\n        let z = o.toString(16);\n\n        // when string is lesser than maxLength\n        let n = z.length;\n        while (n < maxLength) {\n            z = '0' + z;\n            n += 1;\n        }\n        // when string is greater than maxLength\n        n = z.length;\n        while (n > maxLength) {\n            z = z.substring(1);\n            n -= 1;\n        }\n        return '#' + z;\n    };\n\n    // eslint-disable-next-line func-names\n    root.HEX32_W3 = function (o) {\n        return root.HEX_W3(o, 8);\n    };\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.HEX_RGB = root.HEX24_RGB = function (o) {\n        return {\n            R: (o >> 16),\n            G: (o >> 8) & 0xFF,\n            B: o & 0xFF,\n        };\n    };\n\n    // HEX32 = 0x00000000 -> 0xFFFFFFFF\n\n    // eslint-disable-next-line func-names\n    root.HEX32_RGBA = function (o) {\n        return {\n            R: o >>> 16 & 0xFF,\n            G: o >>> 8 & 0xFF,\n            B: o & 0xFF,\n            A: o >>> 24,\n        };\n    };\n\n    // RGBA = R: Red / G: Green / B: Blue / A: Alpha\n\n    // eslint-disable-next-line func-names\n    root.RGBA_HEX32 = function (o) {\n        return (o.A << 24 | o.R << 16 | o.G << 8 | o.B) >>> 0;\n    };\n\n    // RGB = R: Red / G: Green / B: Blue\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.RGB_HEX24 = root.RGB_HEX = function (o) {\n        if (o.R < 0) { o.R = 0; }\n        if (o.G < 0) { o.G = 0; }\n        if (o.B < 0) { o.B = 0; }\n        if (o.R > 255) { o.R = 255; }\n        if (o.G > 255) { o.G = 255; }\n        if (o.B > 255) { o.B = 255; }\n        return o.R << 16 | o.G << 8 | o.B;\n    };\n\n    // eslint-disable-next-line func-names\n    root.RGB_CMY = function (o) {\n        return {\n            C: 1 - (o.R / 255),\n            M: 1 - (o.G / 255),\n            Y: 1 - (o.B / 255),\n        };\n    };\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.RGBA_HSLA = root.RGB_HSL = function (o) { // RGB from 0 to 1\n        const _R = o.R / 255;\n        const _G = o.G / 255;\n        const _B = o.B / 255;\n        const min = Math.min(_R, _G, _B);\n        const max = Math.max(_R, _G, _B);\n        const D = max - min;\n        let H;\n        let S;\n        const L = (max + min) / 2;\n        if (D === 0) { // No chroma\n            H = 0;\n            S = 0;\n        } else { // Chromatic data\n            if (L < 0.5) { S = D / (max + min); }\n            else { S = D / (2 - max - min); }\n            const DR = (((max - _R) / 6) + (D / 2)) / D;\n            const DG = (((max - _G) / 6) + (D / 2)) / D;\n            const DB = (((max - _B) / 6) + (D / 2)) / D;\n            if (_R === max) { H = DB - DG; }\n            else if (_G === max) { H = (1 / 3) + DR - DB; }\n            else if (_B === max) { H = (2 / 3) + DG - DR; }\n            if (H < 0) { H += 1; }\n            if (H > 1) { H -= 1; }\n        }\n        return {\n            H: H * 360,\n            S: S * 100,\n            L: L * 100,\n            A: o.A,\n        };\n    };\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.RGBA_HSVA = root.RGB_HSV = function (o) { //- RGB from 0 to 255\n        const _R = o.R / 255;\n        const _G = o.G / 255;\n        const _B = o.B / 255;\n        const min = Math.min(_R, _G, _B);\n        const max = Math.max(_R, _G, _B);\n        const D = max - min;\n        let H;\n        let S;\n        const V = max;\n        if (D === 0) { // No chroma\n            H = 0;\n            S = 0;\n        } else { // Chromatic data\n            S = D / max;\n            const DR = (((max - _R) / 6) + (D / 2)) / D;\n            const DG = (((max - _G) / 6) + (D / 2)) / D;\n            const DB = (((max - _B) / 6) + (D / 2)) / D;\n            if (_R === max) { H = DB - DG; }\n            else if (_G === max) { H = (1 / 3) + DR - DB; }\n            else if (_B === max) { H = (2 / 3) + DG - DR; }\n            if (H < 0) { H += 1; }\n            if (H > 1) { H -= 1; }\n        }\n        return {\n            H: H * 360,\n            S: S * 100,\n            V: V * 100,\n            A: o.A,\n        };\n    };\n\n    // CMY = C: Cyan / M: Magenta / Y: Yellow\n\n    // eslint-disable-next-line func-names\n    root.CMY_RGB = function (o) {\n        return {\n            R: Math.max(0, (1 - o.C) * 255),\n            G: Math.max(0, (1 - o.M) * 255),\n            B: Math.max(0, (1 - o.Y) * 255),\n        };\n    };\n\n    // eslint-disable-next-line func-names\n    root.CMY_CMYK = function (o) {\n        let C = o.C;\n        let M = o.M;\n        let Y = o.Y;\n        let K = Math.min(Y, Math.min(M, Math.min(C, 1)));\n        C = Math.round((C - K) / (1 - K) * 100);\n        M = Math.round((M - K) / (1 - K) * 100);\n        Y = Math.round((Y - K) / (1 - K) * 100);\n        K = Math.round(K * 100);\n        return {\n            C,\n            M,\n            Y,\n            K,\n        };\n    };\n\n    // CMYK = C: Cyan / M: Magenta / Y: Yellow / K: Key (black)\n\n    // eslint-disable-next-line func-names\n    root.CMYK_CMY = function (o) {\n        return {\n            C: (o.C * (1 - o.K) + o.K),\n            M: (o.M * (1 - o.K) + o.K),\n            Y: (o.Y * (1 - o.K) + o.K),\n        };\n    };\n\n    // HSL (1978) = H: Hue / S: Saturation / L: Lightness\n    // en.wikipedia.org/wiki/HSL_and_HSV\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.HSLA_RGBA = root.HSL_RGB = function (o) {\n        const H = o.H / 360;\n        const S = o.S / 100;\n        const L = o.L / 100;\n        let R;\n        let G;\n        let B;\n        let temp1;\n        let temp2;\n        let temp3;\n        if (S === 0) {\n            // eslint-disable-next-line no-multi-assign\n            R = G = B = L;\n        } else {\n            if (L < 0.5) { temp2 = L * (1 + S); }\n            else { temp2 = (L + S) - (S * L); }\n            temp1 = 2 * L - temp2;\n            // calculate red\n            temp3 = H + (1 / 3);\n            if (temp3 < 0) { temp3 += 1; }\n            if (temp3 > 1) { temp3 -= 1; }\n            if ((6 * temp3) < 1) { R = temp1 + (temp2 - temp1) * 6 * temp3; }\n            else if ((2 * temp3) < 1) { R = temp2; }\n            else if ((3 * temp3) < 2) { R = temp1 + (temp2 - temp1) * ((2 / 3) - temp3) * 6; }\n            else { R = temp1; }\n            // calculate green\n            temp3 = H;\n            if (temp3 < 0) { temp3 += 1; }\n            if (temp3 > 1) { temp3 -= 1; }\n            if ((6 * temp3) < 1) { G = temp1 + (temp2 - temp1) * 6 * temp3; }\n            else if ((2 * temp3) < 1) { G = temp2; }\n            else if ((3 * temp3) < 2) { G = temp1 + (temp2 - temp1) * ((2 / 3) - temp3) * 6; }\n            else { G = temp1; }\n            // calculate blue\n            temp3 = H - (1 / 3);\n            if (temp3 < 0) { temp3 += 1; }\n            if (temp3 > 1) { temp3 -= 1; }\n            if ((6 * temp3) < 1) { B = temp1 + (temp2 - temp1) * 6 * temp3; }\n            else if ((2 * temp3) < 1) { B = temp2; }\n            else if ((3 * temp3) < 2) { B = temp1 + (temp2 - temp1) * ((2 / 3) - temp3) * 6; }\n            else { B = temp1; }\n        }\n        return {\n            R: R * 255,\n            G: G * 255,\n            B: B * 255,\n            A: o.A,\n        };\n    };\n\n    // HSV (1978) = H: Hue / S: Saturation / V: Value\n    // en.wikipedia.org/wiki/HSL_and_HSV\n\n    // eslint-disable-next-line no-multi-assign,func-names\n    root.HSVA_RGBA = root.HSV_RGB = function (o) {\n        let H = o.H / 360;\n        const S = o.S / 100;\n        let V = o.V / 100;\n        let R;\n        let G;\n        let B;\n        let D;\n        let A;\n        let C;\n        if (S === 0) {\n            // eslint-disable-next-line no-multi-assign\n            R = G = B = Math.round(V * 255);\n        } else {\n            if (H >= 1) {\n                H = 0;\n            }\n            H *= 6;\n            D = H - Math.floor(H);\n            A = Math.round(255 * V * (1 - S));\n            B = Math.round(255 * V * (1 - (S * D)));\n            C = Math.round(255 * V * (1 - (S * (1 - D))));\n            V = Math.round(255 * V);\n            // eslint-disable-next-line default-case\n            switch (Math.floor(H)) {\n            case 0:\n                R = V;\n                G = C;\n                B = A;\n                break;\n            case 1:\n                R = B;\n                G = V;\n                B = A;\n                break;\n            case 2:\n                R = A;\n                G = V;\n                B = C;\n                break;\n            case 3:\n                R = A;\n                G = B;\n                B = V;\n                break;\n            case 4:\n                R = C;\n                G = A;\n                B = V;\n                break;\n            case 5:\n                R = V;\n                G = A;\n                // B = B;\n                break;\n            }\n        }\n        return {\n            R,\n            G,\n            B,\n            A: o.A,\n        };\n    };\n\n}());\n","/*\n    ----------------------------------------------------------\n    MIDI.Synesthesia : 0.3.1 : 2012-01-06\n    ----------------------------------------------------------\n    Peacock:  “Instruments to perform color-music: Two centuries of technological experimentation,” Leonardo, 21 (1988), 397-406.\n    Gerstner:  Karl Gerstner, The Forms of Color 1986\n    Klein:  Colour-Music: The art of light, London: Crosby Lockwood and Son, 1927.\n    Jameson:  “Visual music in a visual programming language,” IEEE Symposium on Visual Languages, 1999, 111-118.\n    Helmholtz:  Treatise on Physiological Optics, New York: Dover Books, 1962\n    Jones:  The art of light & color, New York: Van Nostrand Reinhold, 1972\n    ----------------------------------------------------------\n    Reference: http://rhythmiclight.com/archives/ideas/colorscales.html\n    ----------------------------------------------------------\n*/\nimport { Color } from '../inc/colorspace.js';\n\nexport const data = {\n    'Isaac Newton (1704)': {\n        format: 'HSL',\n        ref: 'Gerstner, p.167',\n        english: [\n            'red', null, 'orange', null, 'yellow', 'green', null,\n            'blue', null, 'indigo', null, 'violet',\n        ],\n        0: [ 0, 96, 51 ],  // C\n        1: [ 0, 0, 0 ],  // C#\n        2: [ 29, 94, 52 ],  // D\n        3: [ 0, 0, 0 ],  // D#\n        4: [ 60, 90, 60 ],  // E\n        5: [ 135, 76, 32 ],  // F\n        6: [ 0, 0, 0 ],  // F#\n        7: [ 248, 82, 28 ],  // G\n        8: [ 0, 0, 0 ],  // G#\n        9: [ 302, 88, 26 ],  // A\n        10: [ 0, 0, 0 ],  // A#\n        11: [ 325, 84, 46 ],  // B\n    },\n    'Louis Bertrand Castel (1734)': {\n        format: 'HSL',\n        ref: 'Peacock, p.400',\n        english: [\n            'blue', 'blue-green', 'green', 'olive green', 'yellow',\n            'yellow-orange', 'orange', 'red', 'crimson', 'violet',\n            'agate', 'indigo',\n        ],\n        0: [ 248, 82, 28 ],\n        1: [ 172, 68, 34 ],\n        2: [ 135, 76, 32 ],\n        3: [ 79, 59, 36 ],\n        4: [ 60, 90, 60 ],\n        5: [ 49, 90, 60 ],\n        6: [ 29, 94, 52 ],\n        7: [ 360, 96, 51 ],\n        8: [ 1, 89, 33 ],\n        9: [ 325, 84, 46 ],\n        10: [ 273, 80, 27 ],\n        11: [ 302, 88, 26 ],\n    },\n    'George Field (1816)': {\n        format: 'HSL',\n        ref: 'Klein, p.69',\n        english: [\n            'blue', null, 'purple', null, 'red', 'orange', null,\n            'yellow', null, 'yellow green', null, 'green',\n        ],\n        0: [ 248, 82, 28 ],\n        1: [ 0, 0, 0 ],\n        2: [ 302, 88, 26 ],\n        3: [ 0, 0, 0 ],\n        4: [ 360, 96, 51 ],\n        5: [ 29, 94, 52 ],\n        6: [ 0, 0, 0 ],\n        7: [ 60, 90, 60 ],\n        8: [ 0, 0, 0 ],\n        9: [ 79, 59, 36 ],\n        10: [ 0, 0, 0 ],\n        11: [ 135, 76, 32 ],\n    },\n    'D. D. Jameson (1844)': {\n        format: 'HSL',\n        ref: 'Jameson, p.12',\n        english: [\n            'red', 'red-orange', 'orange', 'orange-yellow', 'yellow',\n            'green', 'green-blue', 'blue', 'blue-purple', 'purple',\n            'purple-violet', 'violet',\n        ],\n        0: [ 360, 96, 51 ],\n        1: [ 14, 91, 51 ],\n        2: [ 29, 94, 52 ],\n        3: [ 49, 90, 60 ],\n        4: [ 60, 90, 60 ],\n        5: [ 135, 76, 32 ],\n        6: [ 172, 68, 34 ],\n        7: [ 248, 82, 28 ],\n        8: [ 273, 80, 27 ],\n        9: [ 302, 88, 26 ],\n        10: [ 313, 78, 37 ],\n        11: [ 325, 84, 46 ],\n    },\n    'Theodor Seemann (1881)': {\n        format: 'HSL',\n        ref: 'Klein, p.86',\n        english: [\n            'carmine', 'scarlet', 'orange', 'yellow-orange',\n            'yellow', 'green', 'green blue', 'blue',\n            'indigo', 'violet', 'brown', 'black',\n        ],\n        0: [ 0, 58, 26 ],\n        1: [ 360, 96, 51 ],\n        2: [ 29, 94, 52 ],\n        3: [ 49, 90, 60 ],\n        4: [ 60, 90, 60 ],\n        5: [ 135, 76, 32 ],\n        6: [ 172, 68, 34 ],\n        7: [ 248, 82, 28 ],\n        8: [ 302, 88, 26 ],\n        9: [ 325, 84, 46 ],\n        10: [ 0, 58, 26 ],\n        11: [ 0, 0, 3 ],\n    },\n    'A. Wallace Rimington (1893)': {\n        format: 'HSL',\n        ref: 'Peacock, p.402',\n        english: [\n            'deep red', 'crimson', 'orange-crimson', 'orange', 'yellow',\n            'yellow-green', 'green', 'blueish green', 'blue-green',\n            'indigo', 'deep blue', 'violet',\n        ],\n        0: [ 360, 96, 51 ],\n        1: [ 1, 89, 33 ],\n        2: [ 14, 91, 51 ],\n        3: [ 29, 94, 52 ],\n        4: [ 60, 90, 60 ],\n        5: [ 79, 59, 36 ],\n        6: [ 135, 76, 32 ],\n        7: [ 163, 62, 40 ],\n        8: [ 172, 68, 34 ],\n        9: [ 302, 88, 26 ],\n        10: [ 248, 82, 28 ],\n        11: [ 325, 84, 46 ],\n    },\n    'Bainbridge Bishop (1893)': {\n        format: 'HSL',\n        ref: 'Bishop, p.11',\n        english: [\n            'red', 'orange-red or scarlet', 'orange', 'gold or yellow-orange',\n            'yellow or green-gold', 'yellow-green', 'green',\n            'greenish-blue or aquamarine', 'blue', 'indigo or violet-blue',\n            'violet', 'violet-red', 'red',\n        ],\n        0: [ 360, 96, 51 ],\n        1: [ 1, 89, 33 ],\n        2: [ 29, 94, 52 ],\n        3: [ 50, 93, 52 ],\n        4: [ 60, 90, 60 ],\n        5: [ 73, 73, 55 ],\n        6: [ 135, 76, 32 ],\n        7: [ 163, 62, 40 ],\n        8: [ 302, 88, 26 ],\n        9: [ 325, 84, 46 ],\n        10: [ 343, 79, 47 ],\n        11: [ 360, 96, 51 ],\n    },\n    'H. von Helmholtz (1910)': {\n        format: 'HSL',\n        ref: 'Helmholtz, p.22',\n        english: [\n            'yellow', 'green', 'greenish blue', 'cyan-blue', 'indigo blue',\n            'violet', 'end of red', 'red', 'red', 'red', 'red orange', 'orange',\n        ],\n        0: [ 60, 90, 60 ],\n        1: [ 135, 76, 32 ],\n        2: [ 172, 68, 34 ],\n        3: [ 211, 70, 37 ],\n        4: [ 302, 88, 26 ],\n        5: [ 325, 84, 46 ],\n        6: [ 330, 84, 34 ],\n        7: [ 360, 96, 51 ],\n        8: [ 10, 91, 43 ],\n        9: [ 10, 91, 43 ],\n        10: [ 8, 93, 51 ],\n        11: [ 28, 89, 50 ],\n    },\n    'Alexander Scriabin (1911)': {\n        format: 'HSL',\n        ref: 'Jones, p.104',\n        english: [\n            'red', 'violet', 'yellow', 'steely with the glint of metal',\n            'pearly blue the shimmer of moonshine', 'dark red', 'bright blue',\n            'rosy orange', 'purple', 'green', 'steely with a glint of metal',\n            'pearly blue the shimmer of moonshine',\n        ],\n        0: [ 360, 96, 51 ],\n        1: [ 325, 84, 46 ],\n        2: [ 60, 90, 60 ],\n        3: [ 245, 21, 43 ],\n        4: [ 211, 70, 37 ],\n        5: [ 1, 89, 33 ],\n        6: [ 248, 82, 28 ],\n        7: [ 29, 94, 52 ],\n        8: [ 302, 88, 26 ],\n        9: [ 135, 76, 32 ],\n        10: [ 245, 21, 43 ],\n        11: [ 211, 70, 37 ],\n    },\n    'Adrian Bernard Klein (1930)': {\n        format: 'HSL',\n        ref: 'Klein, p.209',\n        english: [\n            'dark red', 'red', 'red orange', 'orange', 'yellow',\n            'yellow green', 'green', 'blue-green', 'blue', 'blue violet',\n            'violet', 'dark violet',\n        ],\n        0: [ 0, 91, 40 ],\n        1: [ 360, 96, 51 ],\n        2: [ 14, 91, 51 ],\n        3: [ 29, 94, 52 ],\n        4: [ 60, 90, 60 ],\n        5: [ 73, 73, 55 ],\n        6: [ 135, 76, 32 ],\n        7: [ 172, 68, 34 ],\n        8: [ 248, 82, 28 ],\n        9: [ 292, 70, 31 ],\n        10: [ 325, 84, 46 ],\n        11: [ 330, 84, 34 ],\n    },\n    'August Aeppli (1940)': {\n        format: 'HSL',\n        ref: 'Gerstner, p.169',\n        english: [\n            'red', null, 'orange', null, 'yellow', null, 'green',\n            'blue-green', null, 'ultramarine blue', 'violet', 'purple',\n        ],\n        0: [ 0, 96, 51 ],\n        1: [ 0, 0, 0 ],\n        2: [ 29, 94, 52 ],\n        3: [ 0, 0, 0 ],\n        4: [ 60, 90, 60 ],\n        5: [ 0, 0, 0 ],\n        6: [ 135, 76, 32 ],\n        7: [ 172, 68, 34 ],\n        8: [ 0, 0, 0 ],\n        9: [ 211, 70, 37 ],\n        10: [ 273, 80, 27 ],\n        11: [ 302, 88, 26 ],\n    },\n    'I. J. Belmont (1944)': {\n        ref: 'Belmont, p.226',\n        english: [\n            'red', 'red-orange', 'orange', 'yellow-orange', 'yellow',\n            'yellow-green', 'green', 'blue-green', 'blue', 'blue-violet',\n            'violet', 'red-violet',\n        ],\n        0: [ 360, 96, 51 ],\n        1: [ 14, 91, 51 ],\n        2: [ 29, 94, 52 ],\n        3: [ 50, 93, 52 ],\n        4: [ 60, 90, 60 ],\n        5: [ 73, 73, 55 ],\n        6: [ 135, 76, 32 ],\n        7: [ 172, 68, 34 ],\n        8: [ 248, 82, 28 ],\n        9: [ 313, 78, 37 ],\n        10: [ 325, 84, 46 ],\n        11: [ 338, 85, 37 ],\n    },\n    'Steve Zieverink (2004)': {\n        format: 'HSL',\n        ref: 'Cincinnati Contemporary Art Center',\n        english: [\n            'yellow-green', 'green', 'blue-green', 'blue', 'indigo', 'violet',\n            'ultra violet', 'infra red', 'red', 'orange', 'yellow-white', 'yellow',\n        ],\n        0: [ 73, 73, 55 ],\n        1: [ 135, 76, 32 ],\n        2: [ 172, 68, 34 ],\n        3: [ 248, 82, 28 ],\n        4: [ 302, 88, 26 ],\n        5: [ 325, 84, 46 ],\n        6: [ 326, 79, 24 ],\n        7: [ 1, 89, 33 ],\n        8: [ 360, 96, 51 ],\n        9: [ 29, 94, 52 ],\n        10: [ 62, 78, 74 ],\n        11: [ 60, 90, 60 ],\n    },\n    'Circle of Fifths (Johnston 2003)': {\n        format: 'RGB',\n        ref: 'Joseph Johnston',\n        english: [\n            'yellow', 'blue', 'orange', 'teal', 'red', 'green', 'purple',\n            'light orange', 'light blue', 'dark orange', 'dark green', 'violet',\n        ],\n        0: [ 255, 255, 0 ],\n        1: [ 50, 0, 255 ],\n        2: [ 255, 150, 0 ],\n        3: [ 0, 210, 180 ],\n        4: [ 255, 0, 0 ],\n        5: [ 130, 255, 0 ],\n        6: [ 150, 0, 200 ],\n        7: [ 255, 195, 0 ],\n        8: [ 30, 130, 255 ],\n        9: [ 255, 100, 0 ],\n        10: [ 0, 200, 0 ],\n        11: [ 225, 0, 225 ],\n    },\n    'Circle of Fifths (Wheatman 2002)': {\n        format: 'HEX',\n        ref: 'Stuart Wheatman', // http://www.valleysfamilychurch.org/\n        english: [],\n        data: [\n            '#122400', '#2E002E', '#002914', '#470000', '#002142', '#2E2E00', '#290052',\n            '#003D00', '#520029', '#003D3D', '#522900', '#000080', '#244700', '#570057',\n            '#004D26', '#7A0000', '#003B75', '#4C4D00', '#47008F', '#006100', '#850042',\n            '#005C5C', '#804000', '#0000C7', '#366B00', '#80007F', '#00753B', '#B80000',\n            '#0057AD', '#6B6B00', '#6600CC', '#008A00', '#B8005C', '#007F80', '#B35900',\n            '#2424FF', '#478F00', '#AD00AD', '#00994D', '#F00000', '#0073E6', '#8F8F00',\n            '#8A14FF', '#00AD00', '#EB0075', '#00A3A3', '#E07000', '#6B6BFF', '#5CB800',\n            '#DB00DB', '#00C261', '#FF5757', '#3399FF', '#ADAD00', '#B56BFF', '#00D600',\n            '#FF57AB', '#00C7C7', '#FF9124', '#9999FF', '#6EDB00', '#FF29FF', '#00E070',\n            '#FF9999', '#7ABDFF', '#D1D100', '#D1A3FF', '#00FA00', '#FFA3D1', '#00E5E6',\n            '#FFC285', '#C2C2FF', '#80FF00', '#FFA8FF', '#00E070', '#FFCCCC', '#C2E0FF',\n            '#F0F000', '#EBD6FF', '#ADFFAD', '#FFD6EB', '#8AFFFF', '#FFEBD6', '#EBEBFF',\n            '#E0FFC2', '#FFEBFF', '#E5FFF2', '#FFF5F5'],\n    },\n};\n\nexport const map = type => {\n    const data_internal = {};\n    const blend = (a, b) => [ // blend two colors and round results\n        Math.floor(a[0] * 0.5 + b[0] * 0.5 + 0.5),\n        Math.floor(a[1] * 0.5 + b[1] * 0.5 + 0.5),\n        Math.floor(a[2] * 0.5 + b[2] * 0.5 + 0.5),\n    ];\n\n    const syn = data;\n    const colors = syn[type] || syn['D. D. Jameson (1844)'];\n    let prior_clr = colors[3];\n    let H;\n    let S;\n    let L;\n    for (let note = 0; note <= 88; note++) { // creates mapping for 88 notes\n        if (colors.data) {\n            data_internal[note] = {\n                hsl: colors.data[note],\n                hex: colors.data[note],\n            };\n        } else {\n            let clr = colors[(note + 9) % 12];\n\n            if (colors.format === 'RGB') {\n                clr = Color.Space(clr, 'RGB>HSL');\n                H = Math.floor(clr.H);\n                S = Math.floor(clr.S);\n                L = Math.floor(clr.L);\n            } else {  // HSL\n                H = clr[0];\n                S = clr[1];\n                L = clr[2];\n            }\n\n            if (H === S && S === L) { // note color is unset\n                clr = blend(prior_clr, colors[(note + 10) % 12]);\n            }\n\n            //  var amount = L / 10;\n            //  var octave = note / 12 >> 0;\n            //  var octaveLum = L + amount * octave - 3.0 * amount; // map luminance to octave\n\n            data_internal[note] = {\n                hsl: 'hsla(' + H + ',' + S + '%,' + L + '%, 1)',\n                hex: Color.Space({H, S, L}, 'HSL>RGB>HEX>W3'),\n            };\n\n            prior_clr = clr;\n        }\n    }\n    return data_internal;\n};\n","/*!\n  ----------------------------------------------------------\n  midicube\n  2025-05-23 - version 0.9.1\n\n  based on MIDI.js. v. 0.3.4 : 2015-03-26\n\n  MIT License\n  https://github.com/mscuthbert/midicube/\n\n  Technologies: Web MIDI API, Web Audio API, HTML5 Audio Tag\n  ----------------------------------------------------------\n*/\n\n// not in core-js\nimport 'regenerator-runtime/runtime';\n// core-js will monkey patch automatically\n\n// no longer imported by default -- webmidi shim needs to be loaded separately\n// import './shim/WebAudioAPI.js';\nimport { audioDetect, supports as ad_supports } from './audioDetect.js';\nimport * as AudioTag from './plugin.audiotag.js';  // to be \"export * as\" when fully supported\nimport * as WebAudio from './plugin.webaudio.js';  // to be \"export * as\" when fully supported\nimport * as WebMIDI from './plugin.webmidi.js';\nimport { PlayInstance } from './player.js';\nimport * as Synesthesia from './synesthesia.js';\nimport {\n    GM, noteToKey, keyToNote, channels,\n} from './gm.js';  // to be \"export * as\" when fully supported\n\nexport const audioDetect_supports = ad_supports;\n\nexport {\n    GM, noteToKey, keyToNote, channels,\n};\nexport {\n    AudioTag, WebAudio, WebMIDI,\n};\nexport { Synesthesia };   // remove after export * as above\n\nexport const Soundfont = {};\n\nexport const audio_contexts = {\n    AudioTag,\n    WebAudio,\n    WebMIDI,\n};\n\nexport const config = {\n    soundfontUrl: './soundfont/',\n    api: '',\n    audioFormat: '',\n    supports: {},\n    connected_plugin: WebAudio,  // just for linting/inheritance\n    is_connected: false,\n};\n\n\n/*\nMIDI.loadPlugin({\n    onsuccess: function() { },\n    onprogress: function(state, percent) { },\n    targetFormat: 'mp3', // optionally can force to use MP3 (for instance on mobile networks)\n    instrument: 'acoustic_grand_piano', // or 1 (default)\n    instruments: [ 'acoustic_grand_piano', 'acoustic_guitar_nylon' ] // or multiple instruments\n});\n*/\n\nexport const loadPlugin = opts => {\n    if (typeof opts === 'function') {\n        opts = {\n            onsuccess: opts,\n        };\n    }\n    opts.onprogress = opts.onprogress || undefined;\n    opts.api = opts.api || '';\n    opts.targetFormat = opts.targetFormat || '';\n    opts.instrument = opts.instrument || 'acoustic_grand_piano';\n    opts.instruments = opts.instruments || undefined;\n    // MSC: add the order of API precedence.\n    //      Chrome's need for sys permissions for webmidi makes it lower precedence.\n    opts.apiPrecedence = opts.apiPrecedence || ['webaudio', 'webmidi', 'audiotag'];\n\n    config.soundfontUrl = opts.soundfontUrl || config.soundfontUrl;\n\n    // Detect the best type of audio to use\n    audioDetect(supports => {\n        const hash = window.location.hash;\n        let api = '';\n\n        // use the most appropriate plugin if not specified\n        if (supports[opts.api]) {\n            api = opts.api;\n        } else if (supports[hash.substring(1)]) {\n            api = hash.substring(1);\n        } else {\n            for (const apiInOrder of opts.apiPrecedence) {\n                if (supports[apiInOrder]) {\n                    api = apiInOrder;\n                    break;\n                }\n            }\n        }\n\n        if (connect[api]) {\n            let audioFormat = '';\n            const supports_ogg = supports['audio/ogg'];\n            const supports_mpeg = supports['audio/mpeg'];\n            const audio_format_precedence = supports.ogg_mp3_precedence;\n\n            // use audio/ogg when supported\n            if (opts.targetFormat) {\n                audioFormat = opts.targetFormat;\n            } else { // use best chance of playing, then quality as tiebreak.\n                if (supports_ogg && audio_format_precedence === 'ogg') {\n                    audioFormat = 'ogg';\n                } else if (supports_mpeg && audio_format_precedence === 'mp3') {\n                    audioFormat = 'mp3';\n                } else if (supports_ogg) {\n                    audioFormat = 'ogg';\n                } else if (supports_mpeg) {\n                    audioFormat = 'mp3';\n                } else if (api !== 'webmidi') {\n                    console.warn('no supporting playback formats...will try mp3 but unlikely');\n                    audioFormat = 'mp3';\n                }\n            }\n\n            // load the specified plugin\n            config.api = api;\n            config.audioFormat = audioFormat;\n            config.supports = supports;\n            loadProgram(opts);\n        }\n    });\n};\n\n/*\n    loadProgram({\n        instrument: 'banjo'\n        onsuccess: function() { },\n        onprogress: function(state, percent) { },\n        onerror: function() { },\n    })\n*/\n\nexport const loadProgram = opts => {\n    let instruments = opts.instruments || opts.instrument || 'acoustic_grand_piano';\n    //\n    if (typeof instruments !== 'object') {\n        if (instruments || instruments === 0) {\n            instruments = [instruments];\n        } else {\n            instruments = [];\n        }\n    }\n    // convert numeric ids into strings\n    for (let i = 0; i < instruments.length; i++) {\n        const instrument = instruments[i];\n        if (instrument === (instrument + 0)) { // is numeric\n            if (GM.byId[instrument]) {\n                instruments[i] = GM.byId[instrument].id;\n            }\n        }\n    }\n    //\n    opts.format = config.audioFormat;\n    opts.instruments = instruments;\n    //\n    connect[config.api](opts);\n};\n\nconst connect = {\n    webmidi: opts => {\n        // cant wait for this to be standardized!\n        pre_connect(WebMIDI, opts);\n        WebMIDI.connect(opts);\n        config.is_connected = true;\n    },\n    audiotag: opts => {\n        // works ok, kinda like a drunken tuna fish, across the board\n        // http://caniuse.com/audio\n        pre_connect(AudioTag, opts);\n        requestQueue(opts, 'AudioTag');\n    },\n    webaudio: opts => {\n        // works awesome! safari, chrome and firefox support\n        // http://caniuse.com/web-audio\n        pre_connect(WebAudio, opts);\n        requestQueue(opts, 'WebAudio');\n    },\n};\n\n// noinspection JSUnusedLocalSymbols\n/**\n *\n * @param {WebMIDI|WebAudio|AudioTag} plugin\n * @param {Object} [opts]\n */\nconst pre_connect = (plugin, opts) => {\n    config.connected_plugin = plugin;\n\n    // noinspection JSUnresolvedVariable\n    plugin.shared_root_info.Soundfont = Soundfont;\n    // noinspection JSUnresolvedVariable\n    plugin.shared_root_info.config = config;\n    // noinspection JSUnresolvedVariable\n    plugin.shared_root_info.webaudio_backup_connect = opts => connect.webaudio(opts);\n};\n\nexport const requestQueue = (opts, context) => {\n    const audioFormat = opts.format;\n    const { instruments, onprogress, onerror } = opts;\n    const correct_audio_context = audio_contexts[context] || context.WebAudio;\n\n    const num_instruments = instruments.length;\n    let pending = num_instruments;\n    const waitForEnd = () => {\n        pending -= 1;\n        if (!pending) {\n            correct_audio_context.connect(opts);\n            config.is_connected = true;\n            if (onprogress) {\n                onprogress('load', 1.0);\n            }\n        }\n    };\n\n    const onprogress_inner = (evt, progress, instrumentId) => {\n        const fileProgress = progress / num_instruments;\n        const queueProgress = (num_instruments - pending) / num_instruments;\n        if (onprogress) {\n            onprogress('load', fileProgress + queueProgress, instrumentId);\n        }\n    };\n\n\n    for (const instrumentId of instruments) {\n        if (Soundfont[instrumentId]) { // already loaded\n            waitForEnd();\n        } else { // needs to be requested\n            const onsuccess_inner = () => waitForEnd();\n            sendRequest(\n                instrumentId,\n                audioFormat,\n                (evt, progress) => onprogress_inner(evt, progress, instrumentId),\n                onsuccess_inner,\n                onerror\n            );\n        }\n    }\n};\n\nexport const sendRequest = (instrumentId, audioFormat, onprogress, onsuccess, onerror) => {\n    const soundfontPath = config.soundfontUrl + instrumentId + '-' + audioFormat + '.js';\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', soundfontPath);\n    xhr.setRequestHeader('Content-Type', 'text/plain');\n    xhr.onload = () => {\n        if (xhr.status === 200) {\n            const script = document.createElement('script');\n            script.language = 'javascript';\n            script.type = 'text/javascript';\n            script.text = xhr.responseText;\n            document.body.appendChild(script);\n            onsuccess();\n        } else {\n            if (onerror) {\n                onerror();\n            } else {\n                console.error(`Could not load soundfont; path was ${soundfontPath}`);\n            }\n        }\n    };\n    xhr.send();\n};\n\n\n// These are methods that call the connected plugin's method\n\n// TODO: get audio buffers from webaudio audioBuffers\n\n\nexport const playChannel = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.playChannel(...options);\n};\n\nexport const stopChannel = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.stopChannel(...options);\n};\n\nexport const send = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.send(...options);\n};\nexport const setController = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.setController(...options);\n};\nexport const setVolume = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.setVolume(...options);\n};\nexport const programChange = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.programChange(...options);\n};\nexport const pitchBend = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.pitchBend(...options);\n};\nexport const noteOn = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.noteOn(...options);\n};\nexport const noteOff = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.noteOff(...options);\n};\n\nexport const chordOn = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.chordOn(...options);\n};\n\nexport const chordOff = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.chordOff(...options);\n};\n\nexport const stopAllNotes = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.stopAllNotes(...options);\n};\n\n\n// noinspection JSUnusedLocalSymbols\nexport const setEffects = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.setEffects();\n};\n\nexport const getContext = () => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.getContext();\n};\n\n\nexport const setContext = (...options) => {\n    if (!config.is_connected) { console.error('Connect before calling'); return undefined; }\n    return config.connected_plugin.setContext(...options);\n};\n\n\n// Player\n\nexport class Player extends PlayInstance {\n    constructor() {\n        super(config.connected_plugin);\n    }\n\n    loadPlugin(...options) {\n        return loadPlugin(...options);\n    }\n}\n"],"names":["root","factory","exports","module","define","amd","self","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","enumerable","configurable","writable","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","o","get","prop","r","IS_SAFARI_DESKTOP","window","safari","IS_FIREFOX","navigator","userAgent","toLowerCase","includes","SUPPORTS_SHADOW_SELECTION","ShadowRoot","getSelection","SUPPORTS_BEFORE_INPUT","InputEvent","getTargetRanges","IS_SAFARI","supports","pending","canPlayThrough","src","body","document","audio","Audio","mime","split","id","setAttribute","addEventListener","removeChild","appendChild","DEBUG","GM","in_dict","asId","replace","res","byName","byId","byCategory","list","entries","instrument","parseInt","substr","indexOf","programNumber","nameId","categoryId","spec","program","category","GM_fixer","channels","get_channels","pitchBend","mute","mono","omni","solo","keyToNote","noteToKey","number2key","n","octave","Math","floor","api","shared_root_info","volumes","vid","buffer_nid","notesOn","notes","audioBuffers","nid","connect","opts","onsuccess","send","data","delay","setController","channel","setEffects","getContext","setContext","playChannel","in_note","instrumentId","note","instrumentNoteId","Soundfont","volume","play","stopChannel","len","cId","pause","setVolume","programChange","noteOn","velocity","setTimeout","noteOff","chordOn","chord","idx","chordOff","stopAllNotes","_keyStr","decodeArrayBuffer","input","bytes","ceil","ab","ArrayBuffer","arrayBuffer","lkey1","lkey2","uarray","chr1","chr2","chr3","enc1","enc2","enc3","enc4","j","Uint8Array","decode","ctx","sources","effects","masterVolume","createAudioContext","channelId","bend","noteId","arguments","buffer","source","currentTime","createBufferSource","chain","gain","destination","playbackRate","gainNode","createGain","min","max","start","linearRampToValueAtTime","sid","tunajs","effect","console","log","newCtx","onprogress","onerror","Tuna","urls","waitForEnd","bufferPending","requestAudio","soundfont","programId","index","url","loadAudio","isLoaded","Base64Binary","decodeAudioData","request","XMLHttpRequest","open","responseType","response","AudioContext","webkitAudioContext","output","errFunction","webaudio_backup_connect","config","requestMIDIAccess","access","pluginOutputs","outputs","cancel","Stream","str","position","read","readInt32","charCodeAt","readInt16","readInt8","signed","eof","readVarInt","b","MidiFileClass","stream","lastEventTypeByte","readChunk","readEvent","event","deltaTime","eventTypeByte","param1","eventType","subtype","noteNumber","amount","controllerType","subtypeByte","number","text","microsecondsPerBeat","hourByte","frameRate","hour","sec","frame","subframe","numerator","denominator","metronome","thirtyseconds","scale","parseAndReturn","headerChunk","headerStream","formatType","trackCount","timeDivision","ticksPerBeat","header","tracks","trackChunk","trackStream","clone","ret","Replayer","midiFile","timeWarp","eventProcessor","bpm","trackStates","beatsPerMinute","bpmOverride","temporal","processEvents","getNextEvent","ticksToNextEvent","nextEventTrack","nextEventIndex","nextEvent","midiEvent","beatsToGenerate","secondsToGenerate","ticksToEvent","time","getData","PlayInstance","plugin","endTime","restart","playing","startDelay","BPM","eventQueue","queuedTime","startTime","noteRegistrar","onMidiEvent","MIDIOffset","__now","startAudio","resume","tmp","stopAudio","addListener","removeListener","clearAnimation","animationFrameId","cancelAnimationFrame","setAnimation","callback","tOurTime","tTheirTime","requestAnimationFrame","Date","now","total","minutes","t1","t2","end","events","loadMidiFile","replayer","MidiFile","currentData","getLength","loadPlugin","loadFile","file","atob","fetch","overrideMimeType","onreadystatechange","readyState","status","t","responseText","ff","mx","scc","String","fromCharCode","z","join","getFileInstruments","instruments","programs","use_value","Number","scheduleTracking","offset","message","shift","totalTime","getNow","performance","fromCache","messages","foffset","queueTime","interval","clearInterval","clearTimeout","disconnect","Color","functions","shortcuts","Space","color","route","pos","RGB_W3","R","G","B","RGBA_W3","alpha","A","W3_RGB","o_arr","W3_RGBA","parseFloat","HSL_W3","H","S","L","HSLA_W3","W3_HSL","W3_HSLA","W3_HEX","W3_HEX24","W3_HEX32","HEX_W3","HEX24_W3","maxLength","toString","substring","HEX32_W3","HEX_RGB","HEX24_RGB","HEX32_RGBA","RGBA_HEX32","RGB_HEX24","RGB_HEX","RGB_CMY","C","M","Y","RGBA_HSLA","RGB_HSL","_R","_G","_B","D","DR","DG","DB","RGBA_HSVA","RGB_HSV","V","CMY_RGB","CMY_CMYK","K","round","CMYK_CMY","HSLA_RGBA","HSL_RGB","temp1","temp2","temp3","HSVA_RGBA","HSV_RGB","format","ref","english","map","data_internal","syn","colors","prior_clr","hsl","hex","clr","a","blend","audioDetect_supports","ad_supports","audio_contexts","AudioTag","WebAudio","WebMIDI","soundfontUrl","audioFormat","connected_plugin","is_connected","targetFormat","apiPrecedence","successCallback","webmidi","plugins","Array","from","audiotag","ctx_constructor","webaudio","canPlayType","vorbis_play_type","vorbis","mpeg_play_type","mpeg","ogg_mp3_precedence","getTime","setInterval","audioDetect","hash","location","apiInOrder","supports_ogg","supports_mpeg","audio_format_precedence","warn","loadProgram","pre_connect","requestQueue","correct_audio_context","num_instruments","onprogress_inner","evt","progress","sendRequest","onsuccess_inner","soundfontPath","xhr","setRequestHeader","onload","script","createElement","language","Player","super"],"sourceRoot":""}